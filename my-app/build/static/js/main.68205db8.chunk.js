(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{119:function(e,n,t){"use strict";t.r(n);var o,r,i,a,s,c,l,d,u,p,b,j,x,m,g,h,f,O,y,v,w,I,R,D,C,k,_,T,S,E,M,$,L,z,N,q,U,A,G,P,F,Q,B,J,V,H,W,Y,K,X,Z,ee,ne,te=t(1),oe=t.n(te),re=t(48),ie=t.n(re),ae=(t(96),t(27)),se=t(81),ce=(t.p,t(97),t(16)),le=t(53),de=t(29),ue=t(15),pe=t(7),be=t(90),je=t(14),xe=t(5),me=t(8),ge=Object(pe.gql)(o||(o=Object(xe.a)(["\n\n    query Login( $user:LoginInput! ){\n        loginUser( user:$user) {\n            username\n            email\n            jwt\n            _id\n        }\n    }\n\n"]))),he=Object(pe.gql)(r||(r=Object(xe.a)(["\n\n    query Check {\n         checkToken {\n            username\n            email\n            _id\n         }\n    }\n\n"]))),fe=t(3),Oe=function(e){var n=e.text;return Object(fe.jsxs)("h1",{children:[" ",n," "]})},ye=t(84),ve=t.n(ye),we=me.a.div(i||(i=Object(xe.a)(["\n\ndisplay:flex;\njustify-content:center;\nalign-items:center;\nflex-direction:column;\nheight:70%;\nwidth:100%;\n\n"]))),Ie=me.a.input(a||(a=Object(xe.a)([" margin-bottom:10px "]))),Re=function(e){var n,t,o=Object(ce.b)(),r=Object(ce.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error})),i=Object(ue.g)(),a=Object(ue.h)(),s=ve.a.parse(a.search.slice(1)).username,c=Object(pe.useLazyQuery)(ge,{onCompleted:function(e){var n=e.loginUser;localStorage.setItem("token",n.jwt),o({type:"SET_USER",payload:n}),i.push("/main-page")}}),l=Object(je.a)(c,2),d=l[0],u=l[1],p=u.loading,b=u.error;return Object(fe.jsxs)(we,{children:[Object(fe.jsx)(Oe,{text:"Welcome To The Group-Chat !"}),s?Object(fe.jsx)("h5",{style:{color:"green"},children:" You Registered. Lets Sign In ! "}):null,p?Object(fe.jsx)("h6",{children:" Giri\u015f Yap\u0131l\u0131yor "}):b?Object(fe.jsxs)("h5",{style:{color:"red"},children:[" ",r.errorType+" "+r.message," "]}):null,Object(fe.jsx)(Ie,{placeholder:"Username",ref:function(e){return n=e},value:s}),Object(fe.jsx)(Ie,{placeholder:"Password",ref:function(e){return t=e},type:"password"}),Object(fe.jsx)("button",{onClick:function(){d({variables:{user:{username:n.value||null,password:t.value||null}}})},children:" LOG IN "}),Object(fe.jsx)(de.b,{to:{pathname:"/register"},style:{textDecoration:"none",fontSize:13,margin:5},children:" Go to Register ! "})]})},De=Object(pe.gql)(s||(s=Object(xe.a)(["\n\n    mutation Register($user:RegisterInput!){\n\n        registerUser(user:$user) {\n            username\n        }\n\n    }\n    \n"]))),Ce=me.a.div(c||(c=Object(xe.a)(["\n\ndisplay:flex;\njustify-content:center;\nalign-items:center;\nflex-direction:column;\nheight:70%;\nwidth:100%;\n\n"]))),ke=me.a.input(l||(l=Object(xe.a)([" margin-bottom:10px "]))),_e=function(e){var n,t,o,r=Object(ue.g)(),i=Object(ce.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error})),a=Object(pe.useMutation)(De,{onCompleted:function(e){var n=e.registerUser;r.push("/login/?username=".concat(n.username))},onError:function(e){console.log(e)}}),s=Object(je.a)(a,2),c=s[0],l=s[1],d=(l.data,l.loading),u=l.error;return Object(fe.jsxs)(Ce,{children:[Object(fe.jsx)(Oe,{text:"Register to the Group-Chat"}),d?Object(fe.jsx)("h6",{children:" Registering... "}):null,u?Object(fe.jsxs)("h5",{style:{color:"red"},children:[" ",i.errorType+" "+i.message," "]}):null,Object(fe.jsx)(ke,{placeholder:"Username",ref:function(e){return n=e}}),Object(fe.jsx)(ke,{placeholder:"email",ref:function(e){return o=e}}),Object(fe.jsx)(ke,{placeholder:"Password",ref:function(e){return t=e},type:"password"}),Object(fe.jsx)("button",{onClick:function(){c({variables:{user:{username:n.value||null,email:o.value||null,password:t.value||null}}})},children:" REGISTER "}),Object(fe.jsx)(de.b,{to:{pathname:"/login"},style:{textDecoration:"none",fontSize:13,margin:5},children:" Go to Login ! "})]})},Te=function(e,n){switch(n.type){case"SET_USER":return Object(ae.a)(Object(ae.a)({},e),{},{user:n.payload});case"SET_ERROR":return Object(ae.a)(Object(ae.a)({},e),{},{error:n.payload});case"LOGOUT":return Object(ae.a)({},n.payload);default:return e}},Se=Object(pe.gql)(d||(d=Object(xe.a)(["\n\n    query GetRooms{\n        getUserRooms {\n\n            _id\n            limit\n            title\n            members{\n                username\n                _id\n            }\n\n        }\n    }\n\n"]))),Ee=Object(pe.gql)(u||(u=Object(xe.a)(["\n\n    query GetOtherRooms{\n        getOtherRooms {\n\n            _id\n            limit\n            title\n            members{\n                username\n                _id\n            }\n            host{\n                username\n                _id\n            }\n         \n        }\n    }\n\n"]))),Me=Object(pe.gql)(p||(p=Object(xe.a)(["\n\n    query GetChatRoom($roomID:ID!) {\n\n        getChatRoom(roomID:$roomID) {\n\n            limit\n            \n            host {\n                _id\n            }\n\n            messages {\n                _id\n                text\n                owner {\n                    username\n                    _id\n                }\n                date\n                repliedMessage {\n                    owner {\n                        username\n                        _id\n                    }\n                    text\n                    date\n                }\n            }\n\n            members {\n                username\n                _id\n            }\n\n        }\n\n    }\n\n"]))),$e=Object(pe.gql)(b||(b=Object(xe.a)(["\n\n    mutation CreateRoom($room:RoomInput!){\n\n        createRoom(room:$room) {\n            title\n            limit\n        }\n\n    }\n    \n"]))),Le=Object(pe.gql)(j||(j=Object(xe.a)(["\n    mutation JoinRoom($roomID:ID!,$limit:Int!,$memberLength:Int!) {\n        joinRoom(roomID:$roomID,limit:$limit,memberLength:$memberLength) {\n            _id\n            title\n            limit\n        }\n    }\n"]))),ze=Object(pe.gql)(x||(x=Object(xe.a)(["\n\n    mutation LeaveRoom($roomID:ID!) {\n\n        leaveRoom(roomID:$roomID) {\n\n            title\n            _id\n\n        }\n\n    }\n\n\n"]))),Ne=Object(pe.gql)(m||(m=Object(xe.a)(["\n\n    subscription MemberJoined($roomID:ID) {\n        room(roomID:$roomID) {\n\n             user {\n                username\n                _id         \n             }\n            \n             roomID\n             actionType\n        }\n    }\n\n"]))),qe=Object(pe.gql)(g||(g=Object(xe.a)(["\n\n    mutation SendMessage($text:String!,$roomID:ID!,$repliedMessage:ID) {\n        sendMessage(text:$text,roomID:$roomID,repliedMessage:$repliedMessage) {\n            _id\n            text\n        }\n    }\n\n"]))),Ue=Object(pe.gql)(h||(h=Object(xe.a)(["\n\n    mutation DeleteMessage($messageID:ID!,$roomID:ID!) {\n\n        deleteMessage(messageID:$messageID,roomID:$roomID) {\n            _id\n            text\n        }\n    }\n"]))),Ae=Object(pe.gql)(f||(f=Object(xe.a)(["\n\n    mutation UpdateMessage($messageID:ID!,$updatedText:String!,$roomID:ID!) {\n\n        updateMessage(messageID:$messageID,updatedText:$updatedText,roomID:$roomID){\n\n            _id\n            text\n        }\n\n    }\n\n"]))),Ge=Object(pe.gql)(O||(O=Object(xe.a)(["\n\n    subscription MessageSent($roomID:ID!) {\n\n        message(roomID:$roomID) {\n            _id\n            text\n            date\n            owner {\n                username\n                _id\n            }\n            actionType\n        }\n\n    }\n\n"]))),Pe=me.a.div(y||(y=Object(xe.a)(["\ndisplay:flex;\n\npadding:10px;\nalign-items:center;\n&:hover{\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    cursor:pointer\n}\n"]))),Fe=function(e){var n=e.room,t=e.joinRoom,o=e.userRoom,r=Object(te.useState)(n.members),i=Object(je.a)(r,2),a=i[0],s=i[1];Object(pe.useSubscription)(Ne,{variables:{roomID:n._id},onSubscriptionData:function(e){var n=e.subscriptionData;"JOIN"==n.data.room.actionType?s((function(e){return e.concat(n.data.room.user)})):"LEAVE"==n.data.room.actionType&&s((function(e){return e.filter((function(e){return n.data.room.user._id!=e._id}))}))}}).data;return Object(fe.jsxs)(Pe,{onClick:t(n._id,n.limit,a.length),children:[Object(fe.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1},children:[Object(fe.jsx)("i",{style:{marginRight:8,color:o?"#f05454":"#00af91"},className:"fas fa-comment"}),n.title.length>10?n.title.slice(0,5)+"...":n.title]}),!o&&Object(fe.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1},children:[Object(fe.jsx)("i",{style:{marginRight:8,color:"#00af91"},className:"fas fa-wifi"}),n.host.username," "]}),Object(fe.jsxs)("span",{style:{display:"flex",alignItems:"center",color:a.length===n.limit?"red":"#76a21e",justifyContent:"space-between",flex:.2},children:[Object(fe.jsx)("i",{style:{marginRight:8,color:o?"#f05454":"#00af91"},className:"fas fa-user-friends"}),a.length+"/"+n.limit]})]},n._id)},Qe=me.a.div(v||(v=Object(xe.a)(["\n\n    padding:15px;\n    display:flex;\n    flex-direction:column;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    width:40%;\n    height:90%;\n    box-sizing: border-box;\n"]))),Be=me.a.div(w||(w=Object(xe.a)(["\n\nwidth:100%;\nheight:100%;\ndisplay:flex;\nflex-direction:column;\nmargin-top:25px;\n\n"]))),Je=(me.a.div(I||(I=Object(xe.a)(["\n\ndisplay:flex;\njustify-content:space-between;\npadding:10px;\nalign-items:center;\n&:hover{\n        box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n        cursor:pointer\n}\n\n\n"]))),function(e){var n=e.timeToRefetch,t=e.setTimeToRefetch,o=Object(pe.useQuery)(Se,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),r=o.data,i=o.loading,a=o.error,s=o.refetch,c=Object(ue.g)(),l=Object(pe.useMutation)(Le,{onError:function(e){return console.log(e)},onCompleted:function(e){var n=e.joinRoom;c.push("/room/"+n._id)}}),d=Object(je.a)(l,1)[0],u=Object(ce.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error}));Object(te.useEffect)((function(){n&&s().then((function(){t(!1)}))}),[n]);var p=function(e,n,t){return function(o){d({variables:{roomID:e,limit:n,memberLength:t}})}};return Object(fe.jsxs)(Qe,{children:[Object(fe.jsx)("span",{style:{textAlign:"center"},children:" My Rooms "}),Object(fe.jsx)(Be,{children:i?Object(fe.jsx)("span",{children:" Fetching... "}):a?Object(fe.jsxs)("span",{children:[" ",u.errorType+" "+u.message," "]}):r.getUserRooms.map((function(e){return Object(fe.jsx)(Fe,{room:e,joinRoom:p,userRoom:!0},e._id)}))})]})}),Ve=me.a.div(R||(R=Object(xe.a)(["\n\n    padding:15px;\n    display:flex;\n    flex-direction:column;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    width:40%;\n    height:90%;\n    box-sizing: border-box;\n    \n"]))),He=me.a.div(D||(D=Object(xe.a)(["\nwidth:100%;\nheight:100%;\ndisplay:flex;\nflex-direction:column;\nmargin-top:25px;\n"]))),We=me.a.div(C||(C=Object(xe.a)(["\nposition:absolute;\nleft:0;\n&:hover{\n        cursor:pointer\n}\n\n"]))),Ye=function(){var e=Object(pe.useQuery)(Ee,{fetchPolicy:"network-only"}),n=e.data,t=e.loading,o=e.error,r=e.refetch,i=Object(ue.g)(),a=Object(pe.useMutation)(Le,{onError:function(e){return console.log(e)},onCompleted:function(e){var n=e.joinRoom;i.push("/room/"+n._id)}}),s=Object(je.a)(a,1)[0],c=Object(ce.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error})),l=function(e,n,t){return function(o){s({variables:{roomID:e,limit:n,memberLength:t}})}};return Object(fe.jsxs)(Ve,{children:[Object(fe.jsxs)("span",{style:{textAlign:"center",position:"relative"},children:["Other Rooms",Object(fe.jsx)(We,{onClick:function(){return r()},className:"fas fa-sync"})]}),Object(fe.jsx)(He,{children:t?Object(fe.jsx)("span",{children:" Fetching... "}):o?Object(fe.jsxs)("span",{children:[" ",c.errorType+" "+c.message," "]}):n.getOtherRooms.map((function(e){return Object(fe.jsx)(Fe,{room:e,joinRoom:l},e._id)}))})]})},Ke=function(){return localStorage.removeItem("token"),An.clearStore(),{type:"LOGOUT",payload:{user:{},error:{}}}},Xe=me.a.div(k||(k=Object(xe.a)(["\n    display:flex;\n    justify-content:space-around;\n    align-items:center;\n    height:100%;\n    width:88%;\n    margin:0 auto;\n"]))),Ze=me.a.div(_||(_=Object(xe.a)(["\n\n    height:500px;\n    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\n    flex:0.75;\n    display:flex;\n    justify-content:space-evenly;\n    align-items:center;\n    box-sizing: border-box;\n    padding:10px;\n"]))),en=me.a.div(T||(T=Object(xe.a)(["\n\n    position:fixed;\n    height:40px;\n    width:100px;\n    top:10px;\n    left:10px;\n    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\n    &:hover{\n    cursor:pointer;\n    background:blue;\n    color:white;\n    transition:100ms;\n    }\n    display:flex;\n    align-items:center;\n    justify-content:center;\n"]))),nn=me.a.div(S||(S=Object(xe.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:flex-start;\n    width:70%;\n"]))),tn=me.a.div(E||(E=Object(xe.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    width:100%;\n    margin-top:30px;\n\n"]))),on=me.a.div(M||(M=Object(xe.a)(["\n\n    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\n    height:500px;\n    flex:0.20;\n    display:flex;\n    flex-direction:column;\n    border-radius:8px;\n    align-items:center; \n\n"]))),rn=me.a.span($||($=Object(xe.a)(["\n    font-size:13px;\n    margin:3px;\n"]))),an=me.a.button(L||(L=Object(xe.a)(["\n        border:none;\n        padding:10px;\n        width:100%;\n        margin-top:15px;\n        display:flex;\n        justify-content:space-around;\n        cursor:pointer;\n        &:hover{\n            box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\n        }\n"]))),sn=me.a.div(z||(z=Object(xe.a)(["\n\ndisplay:flex;\nflex-direction:column;\nwidth:80%;\nfont-size:14px;\nmargin-top:20px;\n\n"]))),cn=function(e){var n,t,o=Object(ce.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.user||{}})),r=Object(pe.useMutation)($e,{onError:function(e){console.log(e)}}),i=Object(je.a)(r,2),a=i[0],s=i[1],c=(s.loading,s.error),l=Object(ce.b)(),d=Object(ue.g)(),u=Object(ce.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error})),p=Object(te.useState)(!1),b=Object(je.a)(p,2),j=b[0],x=b[1];return Object(fe.jsxs)(oe.a.Fragment,{children:[c&&u.errorType+" "+u.message,Object(fe.jsxs)(Xe,{children:[Object(fe.jsx)(en,{onClick:function(){localStorage.removeItem("token"),l(Ke()),d.push("/login")},children:"LOG OUT"}),Object(fe.jsxs)(on,{children:[Object(fe.jsx)("img",{src:"/userpng.png",width:"60%",style:{marginBottom:20,marginTop:20}}),Object(fe.jsxs)(nn,{children:[Object(fe.jsxs)(rn,{children:[" username : ",o.username," "]}),Object(fe.jsxs)(rn,{children:[" email : ",o.email," "]})]}),Object(fe.jsx)(tn,{children:Object(fe.jsxs)(sn,{children:[Object(fe.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(fe.jsx)("span",{children:" Title :"}),Object(fe.jsx)("input",{ref:function(e){return t=e},style:{width:"50%"},placeholder:"title"})]}),Object(fe.jsxs)("div",{style:{display:"flex",marginTop:6,justifyContent:"space-between",width:"100%"},children:[Object(fe.jsx)("span",{children:"Max People :"}),Object(fe.jsx)("select",{style:{width:"100px"},ref:function(e){return n=e},children:Array(10).fill().map((function(e,n){return Object(fe.jsxs)("option",{children:[" ",n+1," "]},n)}))})]}),Object(fe.jsxs)(an,{onClick:function(){a({variables:{room:{title:t.value.toLowerCase()||null,limit:parseInt(n.value)||null}}}).then((function(){x(!0)}))},children:[" Createa Room  ",Object(fe.jsx)("i",{className:"fas fa-plus"})," "]})]})})]}),Object(fe.jsxs)(Ze,{children:[Object(fe.jsx)(Je,{timeToRefetch:j,setTimeToRefetch:x}),Object(fe.jsx)(Ye,{})]})]})]})},ln=me.a.div(N||(N=Object(xe.a)(["\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    height:100%;\n    margin:0 auto;\n    background:#242c37;\n    position:relative;\n"]))),dn=me.a.div(q||(q=Object(xe.a)(["\n\n    height:530px;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n    display:flex;\n    flex-direction:column;\n    justify-content:space-between;\n    align-items:center;\n    box-sizing: border-box;\n    width:44%;\n    margin-left:20px;\n    padding:10px;\n    background:white;\n \n\n"]))),un=me.a.div(U||(U=Object(xe.a)(["\n\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n    height:530px;\n    width:15%;\n    display:flex;\n    flex-direction:column;\n\n    align-items:center; \n    box-sizing: border-box;\n    padding:10px;\n    background:white;\n\n"]))),pn=me.a.div(A||(A=Object(xe.a)(["\n    display:flex;\n    justify-content:space-between;\n    width:100%;\n    flex:0.06;\n"]))),bn=me.a.input(G||(G=Object(xe.a)(["\n\n    flex:0.83;\n    height:30px;\n    font-size:17px;\n    background:#628395;\n    color:white;\n    border:none;\n    padding:5px 10px;\n    outline: none;\n\n"]))),jn=me.a.button(P||(P=Object(xe.a)(["\n\n    background:#ef4f4f;\n    color:white;\n    border:none;\n    flex:0.15;\n    &:hover{\n        cursor:pointer\n    }\n"]))),xn=me.a.ul(F||(F=Object(xe.a)(["\n    \n flex:0.94;\n width:100%;\n display:flex;\n flex-direction:column;\n list-style: none;\n padding:0;\n overflow:scroll;\n overflow-x: hidden;\n"]))),mn=me.a.div(Q||(Q=Object(xe.a)(["\nalign-items:center;\njustify-content:center;\ndisplay:flex;\noverflow: hidden;\nwidth:0;\ntransition:110ms;\n"]))),gn=me.a.li(B||(B=Object(xe.a)(["\n\n width:100%;\n display:flex;\n list-style: none;\n flex-direction:","; \n justify-content:flex-end;\n padding:8px 15px 8px 15px;\n border-radius:5px;\n box-sizing: border-box;\n &:hover {\n    cursor:pointer;\n    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n }\n &:hover ","{\n    margin:","; \n    width:20px;\n    cursor:pointer;\n}\n \n"])),(function(e){return e.checkOwner?"row":"row-reverse"}),mn,(function(e){return e.checkOwner?"0 1.5px":"0 8px 0 1.5px"})),hn=me.a.div(J||(J=Object(xe.a)(["\n background: #628395;\n color:white;\n padding:6px 8px;\n border-radius:5px;\n max-width:35%;\n white-space:normal;\n overflow-wrap: break-word;\n"]))),fn=me.a.span(V||(V=Object(xe.a)(["\ndisplay:flex;\nflex-direction:column;\njustify-content:center;\nfont-size:10px;\npadding:0 7px;\nalign-items:center;\ncolor:",";\n\n"])),(function(e){return e.memberColor})),On=me.a.button(H||(H=Object(xe.a)(["\n\n    background:#ef4f4f;\n    color:white;\n    border:none;\n    border-radius:8px;\n    font-size:12px;\n    &:hover{\n        cursor:pointer\n    }\n    position:absolute;\n    top:20px;\n    left:20px;\n    padding:10px;\n\n"]))),yn=me.a.input(W||(W=Object(xe.a)(["\n        outline: none;\n        border-radius:7px;\n        border:none;\n        padding:5px;\n        color:white;\n        background:#007580;\n"]))),vn=me.a.div(Y||(Y=Object(xe.a)(["\n        overflow:hidden;\n        transition:110ms;\n        width:100%;\n        border-radius:7px;\n        position:relative;  \n        display:flex;\n        background:#242c37;\n        justify-content:space-between;\n        align-items:center;\n        margin-bottom:5px;\n        height:",";\n"])),(function(e){return e.isReplied?"75px":"0px"})),wn=me.a.div(K||(K=Object(xe.a)(["\n        height:100%;\n        width:100%;\n        color:white;\n        box-sizing: border-box;\n        display:flex;\n        align-items:center;\n        padding:20px 10px;\n        font-size:14px;\n        overflow-wrap: break-word;\n        white-space:normal;\n"]))),In=me.a.div(X||(X=Object(xe.a)(["\n        display:flex;\n        width:100%;\n        justify-content:space-between;\n        margin-bottom:5px;\n        color:",";\n        font-size:11px;\n"])),(function(e){return e.color})),Rn=me.a.div(Z||(Z=Object(xe.a)(["\n        position:absolute;\n        color:",";\n        top:8px;\n        left:8px;\n        font-size:11px;\n"])),(function(e){return e.color})),Dn=me.a.div(ee||(ee=Object(xe.a)(["\n    font-size:20px;\n    &:hover{\n    cursor:pointer\n    }\n    color:grey;\n    margin-right:20px;\n"]))),Cn=me.a.div(ne||(ne=Object(xe.a)(["\n    background:#323d4d;\n    color:white;\n    border-radius:5px;\n    max-width:35%;\n    min-width:93px;\n    white-space:normal;\n    display:flex;\n    position:relative;\n    display:flex;\n    padding:10px;\n    flex-direction:column;\n    overflow-wrap: break-word;\n    margin-right:4px;\n    margin-left:4px;\n    font-size:14px;\n"]))),kn=["#F8485E ","#00C1D4","DarkCyan","DarkGoldenRod","DarkBlue","DarkRed","DarkOrange","Indigo","Purple","YellowGreen"],_n=function(e){var n,t=e.match,o=Object(pe.useQuery)(Me,{variables:{roomID:t.params.id}}),r=o.data,i=o.loading,a=(o.error,o.subscribeToMore),s=Object(ue.g)(),c=Object(te.useState)(!1),l=Object(je.a)(c,2),d=l[0],u=l[1],p=Object(te.useState)(),b=Object(je.a)(p,2),j=b[0],x=b[1],m=Object(pe.useMutation)(qe),g=Object(je.a)(m,2),h=g[0],f=g[1].loading,O=Object(pe.useMutation)(Ue),y=Object(je.a)(O,1)[0],v=Object(pe.useMutation)(Ae),w=Object(je.a)(v,1)[0],I=Object(pe.useMutation)(ze,{onCompleted:function(e){s.push("/main-page")}}),R=Object(je.a)(I,1)[0],D=Object(ce.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.user})),C=function(){n.value&&h({variables:{text:n.value||null,roomID:t.params.id||null,repliedMessage:null===j||void 0===j?void 0:j._id}})},k=function(){R({variables:{roomID:t.params.id}})};return Object(te.useEffect)((function(){return function(){k()}}),[]),console.log(r),Object(te.useEffect)((function(){a({variables:{roomID:t.params.id},document:Ge,updateQuery:function(e,n){var t=n.subscriptionData,o=t.data.message,r=t.data.message.actionType;switch(console.log(t),r){case"SEND":setTimeout((function(){document.querySelector(".chatMessages").scrollTo(0,7e3)}),0);var i=Object.assign({},e.getChatRoom,{messages:e.getChatRoom.messages.concat(o)});break;case"DELETE":i=Object.assign({},e.getChatRoom,{messages:e.getChatRoom.messages.filter((function(e){return e._id!=o._id}))});break;case"UPDATE":u(null);i=Object.assign({},e.getChatRoom,{messages:e.getChatRoom.messages.map((function(e){return e._id==o._id?Object.assign({},e,{text:o.text}):e}))});break;default:i=e.getChatRoom}return{getChatRoom:i}}}),a({variables:{roomID:t.params.id},document:Ne,updateQuery:function(e,n){var t=n.subscriptionData.data.room;switch(t.actionType){case"JOIN":var o=Object.assign({},e.getChatRoom,{members:e.getChatRoom.members.concat(t.user)});break;case"LEAVE":o=Object.assign({},e.getChatRoom,{members:e.getChatRoom.members.filter((function(e){return e._id!=t.user._id}))});break;default:o=e.getChatRoom}return{getChatRoom:o}}})}),[]),Object(fe.jsxs)(ln,{children:[Object(fe.jsxs)(On,{onClick:k,children:["LEAVE THE ROOM  ",Object(fe.jsx)("i",{style:{fontSize:14,marginLeft:4},className:"fas fa-sign-out-alt"})]}),Object(fe.jsxs)(un,{children:[Object(fe.jsxs)("span",{style:{color:"#ef4f4f",fontSize:13,fontWeight:"600",letterSpacing:1},children:["GROUP MEMBERS",Object(fe.jsx)("span",{style:{marginLeft:5,fontWeight:600},children:r&&Object(fe.jsxs)(oe.a.Fragment,{children:[" ","(",r.getChatRoom.members.length+"/"+r.getChatRoom.limit,Object(fe.jsx)("i",{style:{fontSize:10,marginLeft:2},className:"fas fa-user"}),")"]})})]}),Object(fe.jsx)("ul",{style:{padding:0,listStyle:"none",width:"100%",marginTop:30},children:r&&r.getChatRoom.members.map((function(e,n){return Object(fe.jsxs)("li",{style:{padding:5,width:"50%",display:"flex",fontSize:17.5,alignItems:"center"},children:[Object(fe.jsx)("i",{className:"fas fa-user",style:{color:kn[n],fontSize:15}}),Object(fe.jsxs)("span",{style:{marginLeft:10,fontSize:14},children:[" ",e.username," "]}),r.getChatRoom.host._id==e._id&&Object(fe.jsx)("i",{className:"fas fa-crown",style:{color:"#f0a500",fontSize:11,marginLeft:4}})]},e._id)}))})]}),Object(fe.jsxs)(dn,{children:[i?" Messages are loading....":Object(fe.jsx)(xn,{className:"chatMessages",children:r&&r.getChatRoom.messages.map((function(e,n){return Object(fe.jsxs)(gn,{checkOwner:e.owner._id==D._id,children:[" ",Object(fe.jsxs)(fn,{memberColor:kn[r.getChatRoom.members.findIndex((function(n){return n._id==e.owner._id}))]||"#87A8A4",children:[Object(fe.jsxs)("span",{style:{fontSize:12},children:[" ",Object(fe.jsx)("i",{className:"fas fa-user"})," ",e.owner.username,"  "]}),Object(fe.jsxs)("span",{style:{color:"#628395"},children:["  ",e.date," "]})]}),e.repliedMessage&&Object(fe.jsxs)(Cn,{children:[Object(fe.jsxs)(In,{color:kn[null===r||void 0===r?void 0:r.getChatRoom.members.findIndex((function(n){return n._id==e.repliedMessage.owner._id}))]||"#87A8A4",style:{top:4,left:4},children:[Object(fe.jsxs)("span",{style:{marginRight:3},children:[Object(fe.jsx)("i",{className:"fas fa-user",style:{marginRight:3}}),e.repliedMessage.owner.username]}),Object(fe.jsx)("span",{style:{marginLeft:3,color:"#628395"},children:e.repliedMessage.date})]}),Object(fe.jsx)("span",{children:e.repliedMessage.text})]}),Object(fe.jsx)(hn,{children:d==e._id?Object(fe.jsx)(yn,{onKeyDown:function(n){var o,r;"Enter"==n.key&&(o=e._id,r=n.target.value,w({variables:{messageID:o||null,roomID:t.params.id||null,updatedText:r||null}}))},defaultValue:e.text}):e.text}),e.owner._id==D._id?Object(fe.jsxs)(oe.a.Fragment,{children:[Object(fe.jsx)(mn,{onClick:function(){return n=e._id,void y({variables:{messageID:n||null,roomID:t.params.id||null}});var n},children:Object(fe.jsx)("i",{style:{color:"#ec4646"},className:"fas fa-trash-alt"})}),Object(fe.jsx)(mn,{onClick:function(){return u(e._id)},children:Object(fe.jsx)("i",{style:{color:"#ec4646"},className:"fas fa-edit"})}),Object(fe.jsx)(mn,{onClick:function(){return x(e)},children:Object(fe.jsx)("i",{style:{color:"#ec4646"},className:"fas fa-reply"})})]}):Object(fe.jsx)(mn,{onClick:function(){return x(e)},children:Object(fe.jsx)("i",{style:{color:"#ec4646"},className:"fas fa-reply"})})]},n)}))}),Object(fe.jsxs)(vn,{isReplied:j,children:[Object(fe.jsxs)(Rn,{color:kn[null===r||void 0===r?void 0:r.getChatRoom.members.findIndex((function(e){return e._id==(null===j||void 0===j?void 0:j.owner._id)}))]||"#87A8A4",children:[Object(fe.jsx)("i",{className:"fas fa-user"}),Object(fe.jsx)("span",{style:{marginLeft:4},children:null===j||void 0===j?void 0:j.owner.username}),Object(fe.jsx)("span",{style:{marginLeft:8,color:"#628395"},children:null===j||void 0===j?void 0:j.date})]}),Object(fe.jsx)(wn,{children:null===j||void 0===j?void 0:j.text}),Object(fe.jsx)(Dn,{onClick:function(){return x(null)},children:Object(fe.jsx)("i",{class:"fas fa-times"})})]}),Object(fe.jsxs)(pn,{children:[Object(fe.jsx)(bn,{ref:function(e){return n=e},onKeyDown:function(e){"Enter"==e.key&&(C(),e.target.value="")},maxLength:"100"}),Object(fe.jsxs)(jn,{onClick:C,children:[" ",f?Object(fe.jsx)("img",{src:"/spin.gif",width:"30"}):"SEND"," "]})]})]})]})},Tn=t(91),Sn=function(e){var n=e.component,t=Object(Tn.a)(e,["component"]),o=Object(ue.g)(),r=Object(ce.b)(),i=Object(pe.useLazyQuery)(he,{context:{history:o},fetchPolicy:"network-only",onCompleted:function(e){var n=e.checkToken;r({type:"SET_USER",payload:n})}}),a=Object(je.a)(i,2),s=a[0],c=a[1],l=c.loading,d=c.data;return Object(te.useEffect)((function(){s()}),[]),Object(fe.jsx)(ue.b,Object(ae.a)(Object(ae.a)({},t),{},{component:function(e){return!l&&d?Object(fe.jsx)(n,Object(ae.a)({},e)):null}}))},En=t(88),Mn=t(2),$n=new pe.HttpLink({uri:"https://groupchattappp.herokuapp.com/graphql"}),Ln=new En.a({uri:"wss://groupchattappp.herokuapp.com/subscriptions",options:{reconnect:!0,connectionParams:{token:localStorage.getItem("token")},timeout:6e4}}),zn=Object(le.b)(Te,{user:{},error:{}}),Nn=Object(pe.split)((function(e){var n=e.query,t=Object(Mn.q)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),Ln,$n),qn=Object(be.a)((function(e){var n,t,o=e.graphQLErrors,r=e.networkError,i=e.operation.getContext().history;if(o){var a,s=Object(se.a)(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;switch(c.extensions.code){case"UNAUTHENTICATED":zn.dispatch(Ke()),i.push("/login")}n="[".concat(c.extensions.code,"]"),t=t||c.message}}catch(l){s.e(l)}finally{s.f()}zn.dispatch({type:"SET_ERROR",payload:{errorType:n,message:t}})}r&&console.log(o)})),Un=new pe.ApolloLink((function(e,n){var t=localStorage.getItem("token");return e.setContext({headers:Object(ae.a)(Object(ae.a)({},e.getContext().headers),{},{authorization:t?"Bearer ".concat(t):""})}),n(e)})),An=new pe.ApolloClient({link:Object(pe.from)([Un,qn,Nn]),cache:new pe.InMemoryCache});var Gn=function(){return Object(fe.jsx)(pe.ApolloProvider,{client:An,children:Object(fe.jsx)(de.a,{children:Object(fe.jsx)(ce.a,{store:zn,children:Object(fe.jsxs)(ue.d,{children:[Object(fe.jsx)(ue.b,{exact:!0,path:"/",component:function(){return Object(fe.jsx)(ue.a,{to:"/login"})}}),Object(fe.jsx)(ue.b,{path:"/login",component:Re}),Object(fe.jsx)(ue.b,{path:"/register",component:_e}),Object(fe.jsx)(Sn,{path:"/main-page",component:cn,exact:!0}),Object(fe.jsx)(Sn,{path:"/room/:id",component:_n,exact:!0})]})})})})},Pn=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,120)).then((function(n){var t=n.getCLS,o=n.getFID,r=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),o(e),r(e),i(e),a(e)}))};ie.a.render(Object(fe.jsx)(oe.a.StrictMode,{children:Object(fe.jsx)(Gn,{})}),document.getElementById("root")),Pn()},96:function(e,n,t){},97:function(e,n,t){}},[[119,1,2]]]);
//# sourceMappingURL=main.68205db8.chunk.js.map