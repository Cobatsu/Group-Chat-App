(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{119:function(e,n,t){"use strict";t.r(n);var o,r,i,a,s,c,l,d,u,p,b,j,x,m,g,h,f,O,y,v,w,I,R,D,C,k,_,T,S,E,M,$,L,z,N,q,U,G,P,A,F,Q,B,J,V,H,W,Y,K,X,Z,ee,ne=t(1),te=t.n(ne),oe=t(48),re=t.n(oe),ie=(t(96),t(27)),ae=t(81),se=(t.p,t(97),t(16)),ce=t(53),le=t(29),de=t(15),ue=t(7),pe=t(90),be=t(14),je=t(5),xe=t(8),me=Object(ue.gql)(o||(o=Object(je.a)(["\n\n    query Login( $user:LoginInput! ){\n        loginUser( user:$user) {\n            username\n            email\n            jwt\n            _id\n        }\n    }\n\n"]))),ge=Object(ue.gql)(r||(r=Object(je.a)(["\n\n    query Check {\n         checkToken {\n            username\n            email\n            _id\n         }\n    }\n\n"]))),he=t(3),fe=function(e){var n=e.text;return Object(he.jsxs)("h1",{children:[" ",n," "]})},Oe=t(84),ye=t.n(Oe),ve=xe.a.div(i||(i=Object(je.a)(["\n\ndisplay:flex;\njustify-content:center;\nalign-items:center;\nflex-direction:column;\nheight:70%;\nwidth:100%;\n\n"]))),we=xe.a.input(a||(a=Object(je.a)([" margin-bottom:10px "]))),Ie=function(e){var n,t,o=Object(se.b)(),r=Object(se.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error})),i=Object(de.g)(),a=Object(de.h)(),s=ye.a.parse(a.search.slice(1)).username,c=Object(ue.useLazyQuery)(me,{onCompleted:function(e){var n=e.loginUser;localStorage.setItem("token",n.jwt),o({type:"SET_USER",payload:n}),i.push("/main-page")}}),l=Object(be.a)(c,2),d=l[0],u=l[1],p=u.loading,b=u.error;return Object(he.jsxs)(ve,{children:[Object(he.jsx)(fe,{text:"Welcome To The Group-Chat !"}),s?Object(he.jsx)("h5",{style:{color:"green"},children:" You Registered. Lets Sign In ! "}):null,p?Object(he.jsx)("h6",{children:" Giri\u015f Yap\u0131l\u0131yor "}):b?Object(he.jsxs)("h5",{style:{color:"red"},children:[" ",r.errorType+" "+r.message," "]}):null,Object(he.jsx)(we,{placeholder:"Username",ref:function(e){return n=e},value:s}),Object(he.jsx)(we,{placeholder:"Password",ref:function(e){return t=e},type:"password"}),Object(he.jsx)("button",{onClick:function(){d({variables:{user:{username:n.value||null,password:t.value||null}}})},children:" LOG IN "}),Object(he.jsx)(le.b,{to:{pathname:"/register"},style:{textDecoration:"none",fontSize:13,margin:5},children:" Go to Register ! "})]})},Re=Object(ue.gql)(s||(s=Object(je.a)(["\n\n    mutation Register($user:RegisterInput!){\n\n        registerUser(user:$user) {\n            username\n        }\n\n    }\n    \n"]))),De=xe.a.div(c||(c=Object(je.a)(["\n\ndisplay:flex;\njustify-content:center;\nalign-items:center;\nflex-direction:column;\nheight:70%;\nwidth:100%;\n\n"]))),Ce=xe.a.input(l||(l=Object(je.a)([" margin-bottom:10px "]))),ke=function(e){var n,t,o,r=Object(de.g)(),i=Object(se.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error})),a=Object(ue.useMutation)(Re,{onCompleted:function(e){var n=e.registerUser;r.push("/login/?username=".concat(n.username))},onError:function(e){console.log(e)}}),s=Object(be.a)(a,2),c=s[0],l=s[1],d=(l.data,l.loading),u=l.error;return Object(he.jsxs)(De,{children:[Object(he.jsx)(fe,{text:"Register to the Group-Chat"}),d?Object(he.jsx)("h6",{children:" Registering... "}):null,u?Object(he.jsxs)("h5",{style:{color:"red"},children:[" ",i.errorType+" "+i.message," "]}):null,Object(he.jsx)(Ce,{placeholder:"Username",ref:function(e){return n=e}}),Object(he.jsx)(Ce,{placeholder:"email",ref:function(e){return o=e}}),Object(he.jsx)(Ce,{placeholder:"Password",ref:function(e){return t=e},type:"password"}),Object(he.jsx)("button",{onClick:function(){c({variables:{user:{username:n.value||null,email:o.value||null,password:t.value||null}}})},children:" REGISTER "}),Object(he.jsx)(le.b,{to:{pathname:"/login"},style:{textDecoration:"none",fontSize:13,margin:5},children:" Go to Login ! "})]})},_e=function(e,n){switch(n.type){case"SET_USER":return Object(ie.a)(Object(ie.a)({},e),{},{user:n.payload});case"SET_ERROR":return Object(ie.a)(Object(ie.a)({},e),{},{error:n.payload});case"LOGOUT":return Object(ie.a)({},n.payload);default:return e}},Te=Object(ue.gql)(d||(d=Object(je.a)(["\n\n    query GetRooms{\n        getUserRooms {\n\n            _id\n            limit\n            title\n            members{\n                username\n                _id\n            }\n\n        }\n    }\n\n"]))),Se=Object(ue.gql)(u||(u=Object(je.a)(["\n\n    query GetOtherRooms{\n        getOtherRooms {\n\n            _id\n            limit\n            title\n            members{\n                username\n                _id\n            }\n            host{\n                username\n                _id\n            }\n         \n        }\n    }\n\n"]))),Ee=Object(ue.gql)(p||(p=Object(je.a)(["\n\n    query GetChatRoom($roomID:ID!) {\n\n        getChatRoom(roomID:$roomID) {\n\n            limit\n            \n            host {\n                _id\n            }\n\n            messages {\n                _id\n                text\n                owner {\n                    username\n                    _id\n                }\n                date\n                repliedMessage {\n                    owner {\n                        username\n                        _id\n                    }\n                    text\n                    date\n                }\n            }\n\n            members {\n                username\n                _id\n            }\n\n        }\n\n    }\n\n"]))),Me=Object(ue.gql)(b||(b=Object(je.a)(["\n\n    mutation CreateRoom($room:RoomInput!){\n\n        createRoom(room:$room) {\n            title\n            limit\n        }\n\n    }\n    \n"]))),$e=Object(ue.gql)(j||(j=Object(je.a)(["\n    mutation JoinRoom($roomID:ID!,$limit:Int!,$memberLength:Int!) {\n        joinRoom(roomID:$roomID,limit:$limit,memberLength:$memberLength) {\n            _id\n            title\n            limit\n        }\n    }\n"]))),Le=Object(ue.gql)(x||(x=Object(je.a)(["\n\n    mutation LeaveRoom($roomID:ID!) {\n\n        leaveRoom(roomID:$roomID) {\n\n            title\n            _id\n\n        }\n\n    }\n\n\n"]))),ze=Object(ue.gql)(m||(m=Object(je.a)(["\n\n    subscription MemberJoined($roomID:ID) {\n        room(roomID:$roomID) {\n\n             user {\n                username\n                _id         \n             }\n            \n             roomID\n             actionType\n        }\n    }\n\n"]))),Ne=Object(ue.gql)(g||(g=Object(je.a)(["\n\n    mutation SendMessage($text:String!,$roomID:ID!,$repliedMessage:ID) {\n        sendMessage(text:$text,roomID:$roomID,repliedMessage:$repliedMessage) {\n            _id\n            text\n        }\n    }\n\n"]))),qe=Object(ue.gql)(h||(h=Object(je.a)(["\n\n    mutation DeleteMessage($messageID:ID!,$roomID:ID!) {\n\n        deleteMessage(messageID:$messageID,roomID:$roomID) {\n            _id\n            text\n        }\n    }\n"]))),Ue=Object(ue.gql)(f||(f=Object(je.a)(["\n\n    mutation UpdateMessage($messageID:ID!,$updatedText:String!,$roomID:ID!) {\n\n        updateMessage(messageID:$messageID,updatedText:$updatedText,roomID:$roomID){\n\n            _id\n            text\n        }\n\n    }\n\n"]))),Ge=Object(ue.gql)(O||(O=Object(je.a)(["\n\n    subscription MessageSent($roomID:ID!) {\n\n        message(roomID:$roomID) {\n            _id\n            text\n            date\n            owner {\n                username\n                _id\n            }\n            actionType\n        }\n\n    }\n\n"]))),Pe=xe.a.div(y||(y=Object(je.a)(["\ndisplay:flex;\n\npadding:10px;\nalign-items:center;\n&:hover{\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    cursor:pointer\n}\n"]))),Ae=function(e){var n=e.room,t=e.joinRoom,o=e.userRoom,r=Object(ne.useState)(n.members),i=Object(be.a)(r,2),a=i[0],s=i[1];Object(ue.useSubscription)(ze,{variables:{roomID:n._id},onSubscriptionData:function(e){var n=e.subscriptionData;"JOIN"==n.data.room.actionType?s((function(e){return e.concat(n.data.room.user)})):"LEAVE"==n.data.room.actionType&&s((function(e){return e.filter((function(e){return n.data.room.user._id!=e._id}))}))}}).data;return Object(he.jsxs)(Pe,{onClick:t(n._id,n.limit,a.length),children:[Object(he.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1},children:[Object(he.jsx)("i",{style:{marginRight:8,color:o?"#f05454":"#00af91"},className:"fas fa-comment"}),n.title.length>10?n.title.slice(0,5)+"...":n.title]}),!o&&Object(he.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1},children:[Object(he.jsx)("i",{style:{marginRight:8,color:"#00af91"},className:"fas fa-wifi"}),n.host.username," "]}),Object(he.jsxs)("span",{style:{display:"flex",alignItems:"center",color:a.length===n.limit?"red":"#76a21e",justifyContent:"space-between",flex:.2},children:[Object(he.jsx)("i",{style:{marginRight:8,color:o?"#f05454":"#00af91"},className:"fas fa-user-friends"}),a.length+"/"+n.limit]})]},n._id)},Fe=xe.a.div(v||(v=Object(je.a)(["\n\n    padding:15px;\n    display:flex;\n    flex-direction:column;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    width:40%;\n    height:90%;\n    box-sizing: border-box;\n"]))),Qe=xe.a.div(w||(w=Object(je.a)(["\n\nwidth:100%;\nheight:100%;\ndisplay:flex;\nflex-direction:column;\nmargin-top:25px;\n\n"]))),Be=(xe.a.div(I||(I=Object(je.a)(["\n\ndisplay:flex;\njustify-content:space-between;\npadding:10px;\nalign-items:center;\n&:hover{\n        box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n        cursor:pointer\n}\n\n\n"]))),function(e){var n=e.timeToRefetch,t=e.setTimeToRefetch,o=Object(ue.useQuery)(Te,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),r=o.data,i=o.loading,a=o.error,s=o.refetch,c=Object(de.g)(),l=Object(ue.useMutation)($e,{onError:function(e){return console.log(e)},onCompleted:function(e){var n=e.joinRoom;c.push("/room/"+n._id)}}),d=Object(be.a)(l,1)[0],u=Object(se.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error}));Object(ne.useEffect)((function(){n&&s().then((function(){t(!1)}))}),[n]);var p=function(e,n,t){return function(o){d({variables:{roomID:e,limit:n,memberLength:t}})}};return Object(he.jsxs)(Fe,{children:[Object(he.jsx)("span",{style:{textAlign:"center"},children:" My Rooms "}),Object(he.jsx)(Qe,{children:i?Object(he.jsx)("span",{children:" Fetching... "}):a?Object(he.jsxs)("span",{children:[" ",u.errorType+" "+u.message," "]}):r.getUserRooms.map((function(e){return Object(he.jsx)(Ae,{room:e,joinRoom:p,userRoom:!0},e._id)}))})]})}),Je=xe.a.div(R||(R=Object(je.a)(["\n\n    padding:15px;\n    display:flex;\n    flex-direction:column;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    width:40%;\n    height:90%;\n    box-sizing: border-box;\n    \n"]))),Ve=xe.a.div(D||(D=Object(je.a)(["\nwidth:100%;\nheight:100%;\ndisplay:flex;\nflex-direction:column;\nmargin-top:25px;\n"]))),He=xe.a.div(C||(C=Object(je.a)(["\nposition:absolute;\nleft:0;\n&:hover{\n        cursor:pointer\n}\n\n"]))),We=function(){var e=Object(ue.useQuery)(Se,{fetchPolicy:"network-only"}),n=e.data,t=e.loading,o=e.error,r=e.refetch,i=Object(de.g)(),a=Object(ue.useMutation)($e,{onError:function(e){return console.log(e)},onCompleted:function(e){var n=e.joinRoom;i.push("/room/"+n._id)}}),s=Object(be.a)(a,1)[0],c=Object(se.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error})),l=function(e,n,t){return function(o){s({variables:{roomID:e,limit:n,memberLength:t}})}};return Object(he.jsxs)(Je,{children:[Object(he.jsxs)("span",{style:{textAlign:"center",position:"relative"},children:["Other Rooms",Object(he.jsx)(He,{onClick:function(){return r()},className:"fas fa-sync"})]}),Object(he.jsx)(Ve,{children:t?Object(he.jsx)("span",{children:" Fetching... "}):o?Object(he.jsxs)("span",{children:[" ",c.errorType+" "+c.message," "]}):n.getOtherRooms.map((function(e){return Object(he.jsx)(Ae,{room:e,joinRoom:l},e._id)}))})]})},Ye=function(){return localStorage.removeItem("token"),qn.clearStore(),{type:"LOGOUT",payload:{user:{},error:{}}}},Ke=xe.a.div(k||(k=Object(je.a)(["\n    display:flex;\n    justify-content:space-around;\n    align-items:center;\n    height:100%;\n    width:88%;\n    margin:0 auto;\n"]))),Xe=xe.a.div(_||(_=Object(je.a)(["\n\n    height:500px;\n    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\n    flex:0.75;\n    display:flex;\n    justify-content:space-evenly;\n    align-items:center;\n    box-sizing: border-box;\n    padding:10px;\n"]))),Ze=xe.a.div(T||(T=Object(je.a)(["\n\n    position:fixed;\n    height:40px;\n    width:100px;\n    top:10px;\n    left:10px;\n    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\n    &:hover{\n    cursor:pointer;\n    background:blue;\n    color:white;\n    transition:100ms;\n    }\n    display:flex;\n    align-items:center;\n    justify-content:center;\n"]))),en=xe.a.div(S||(S=Object(je.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:flex-start;\n    width:70%;\n"]))),nn=xe.a.div(E||(E=Object(je.a)(["\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n    width:100%;\n    margin-top:30px;\n\n"]))),tn=xe.a.div(M||(M=Object(je.a)(["\n\n    box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\n    height:500px;\n    flex:0.20;\n    display:flex;\n    flex-direction:column;\n    border-radius:8px;\n    align-items:center; \n\n"]))),on=xe.a.span($||($=Object(je.a)(["\n    font-size:13px;\n    margin:3px;\n"]))),rn=xe.a.button(L||(L=Object(je.a)(["\n        border:none;\n        padding:10px;\n        width:100%;\n        margin-top:15px;\n        display:flex;\n        justify-content:space-around;\n        cursor:pointer;\n        &:hover{\n            box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\n        }\n"]))),an=xe.a.div(z||(z=Object(je.a)(["\n\ndisplay:flex;\nflex-direction:column;\nwidth:80%;\nfont-size:14px;\nmargin-top:20px;\n\n"]))),sn=function(e){var n,t,o=Object(se.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.user||{}})),r=Object(ue.useMutation)(Me,{onError:function(e){console.log(e)}}),i=Object(be.a)(r,2),a=i[0],s=i[1],c=(s.loading,s.error),l=Object(se.b)(),d=Object(de.g)(),u=Object(se.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error})),p=Object(ne.useState)(!1),b=Object(be.a)(p,2),j=b[0],x=b[1];return Object(he.jsxs)(te.a.Fragment,{children:[c&&u.errorType+" "+u.message,Object(he.jsxs)(Ke,{children:[Object(he.jsx)(Ze,{onClick:function(){localStorage.removeItem("token"),l(Ye()),d.push("/login")},children:"LOG OUT"}),Object(he.jsxs)(tn,{children:[Object(he.jsx)("img",{src:"/userpng.png",width:"60%",style:{marginBottom:20,marginTop:20}}),Object(he.jsxs)(en,{children:[Object(he.jsxs)(on,{children:[" username : ",o.username," "]}),Object(he.jsxs)(on,{children:[" email : ",o.email," "]})]}),Object(he.jsx)(nn,{children:Object(he.jsxs)(an,{children:[Object(he.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(he.jsx)("span",{children:" Title :"}),Object(he.jsx)("input",{ref:function(e){return t=e},style:{width:"50%"},placeholder:"title"})]}),Object(he.jsxs)("div",{style:{display:"flex",marginTop:6,justifyContent:"space-between",width:"100%"},children:[Object(he.jsx)("span",{children:"Max People :"}),Object(he.jsx)("select",{style:{width:"100px"},ref:function(e){return n=e},children:Array(10).fill().map((function(e,n){return Object(he.jsxs)("option",{children:[" ",n+1," "]},n)}))})]}),Object(he.jsxs)(rn,{onClick:function(){a({variables:{room:{title:t.value.toLowerCase()||null,limit:parseInt(n.value)||null}}}).then((function(){x(!0)}))},children:[" Createa Room  ",Object(he.jsx)("i",{className:"fas fa-plus"})," "]})]})})]}),Object(he.jsxs)(Xe,{children:[Object(he.jsx)(Be,{timeToRefetch:j,setTimeToRefetch:x}),Object(he.jsx)(We,{})]})]})]})},cn=xe.a.div(N||(N=Object(je.a)(["\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    height:100%;\n    margin:0 auto;\n    background:#242c37;\n    position:relative;\n"]))),ln=xe.a.div(q||(q=Object(je.a)(["\n\n    height:530px;\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n    display:flex;\n    flex-direction:column;\n    justify-content:space-between;\n    align-items:center;\n    box-sizing: border-box;\n    width:44%;\n    margin-left:20px;\n    padding:10px;\n    background:white;\n \n\n"]))),dn=xe.a.div(U||(U=Object(je.a)(["\n\n    box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\n    height:530px;\n    width:15%;\n    display:flex;\n    flex-direction:column;\n\n    align-items:center; \n    box-sizing: border-box;\n    padding:10px;\n    background:white;\n\n"]))),un=xe.a.div(G||(G=Object(je.a)(["\n    display:flex;\n    justify-content:space-between;\n    width:100%;\n    flex:0.06;\n"]))),pn=xe.a.input(P||(P=Object(je.a)(["\n\n    flex:0.83;\n    height:30px;\n    font-size:17px;\n    background:#6f9eaf;\n    color:white;\n    border:none;\n    padding:5px 10px;\n    outline: none;\n\n"]))),bn=xe.a.button(A||(A=Object(je.a)(["\n\n    background:#ef4f4f;\n    color:white;\n    border:none;\n    flex:0.15;\n    &:hover{\n        cursor:pointer\n    }\n"]))),jn=xe.a.ul(F||(F=Object(je.a)(["\n    \n flex:0.94;\n width:100%;\n display:flex;\n flex-direction:column;\n list-style: none;\n padding:0;\n overflow:scroll;\n overflow-x: hidden;\n"]))),xn=xe.a.div(Q||(Q=Object(je.a)(["\nalign-items:center;\njustify-content:center;\ndisplay:flex;\noverflow: hidden;\nwidth:0;\ntransition:110ms;\n"]))),mn=xe.a.li(B||(B=Object(je.a)(["\n\n width:100%;\n display:flex;\n list-style: none;\n flex-direction:","; \n justify-content:flex-end;\n padding:8px 15px 8px 15px;\n border-radius:5px;\n box-sizing: border-box;\n &:hover {\n    cursor:pointer;\n    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n }\n &:hover ","{\n    margin:","; \n    width:20px;\n    cursor:pointer;\n}\n \n"])),(function(e){return e.checkOwner?"row":"row-reverse"}),xn,(function(e){return e.checkOwner?"0 1.5px":"0 8px 0 1.5px"})),gn=xe.a.div(J||(J=Object(je.a)(["\n background: #6f9eaf;\n color:white;\n padding:6px;\n border-radius:5px;\n max-width:35%;\n white-space:normal;\n overflow-wrap: break-word;\n"]))),hn=xe.a.span(V||(V=Object(je.a)(["\ndisplay:flex;\nflex-direction:column;\njustify-content:center;\nfont-size:10px;\npadding:0 7px;\nalign-items:center;\ncolor:",";\n\n"])),(function(e){return e.memberColor})),fn=xe.a.button(H||(H=Object(je.a)(["\n\n    background:#ef4f4f;\n    color:white;\n    border:none;\n    border-radius:8px;\n    font-size:12px;\n    &:hover{\n        cursor:pointer\n    }\n    position:absolute;\n    top:20px;\n    left:20px;\n    padding:10px;\n\n"]))),On=xe.a.input(W||(W=Object(je.a)(["\n        outline: none;\n        border-radius:7px;\n        border:none;\n        padding:5px;\n        color:white;\n        background:#007580;\n"]))),yn=xe.a.div(Y||(Y=Object(je.a)(["\n        overflow:hidden;\n        transition:110ms;\n        width:100%;\n        border-radius:7px;\n        position:relative;  \n        display:flex;\n        background:#e5ddd5;\n        justify-content:space-between;\n        align-items:center;\n        margin-bottom:5px;\n        height:",";\n"])),(function(e){return e.isReplied?"75px":"0px"})),vn=xe.a.div(K||(K=Object(je.a)(["\n        height:100%;\n        width:100%;\n        color:rgba(0, 0, 0, 0.6);\n        box-sizing: border-box;\n        display:flex;\n        align-items:center;\n        padding:20px 10px;\n        font-size:14px;\n        overflow-wrap: break-word;\n        white-space:normal;\n"]))),wn=xe.a.div(X||(X=Object(je.a)(["\n        position:absolute;\n        color:",";\n        top:8px;\n        left:8px;\n        font-size:11px;\n"])),(function(e){return e.color})),In=xe.a.div(Z||(Z=Object(je.a)(["\n    font-size:20px;\n    &:hover{\n    cursor:pointer\n    }\n    color:grey;\n    margin-right:20px;\n"]))),Rn=xe.a.div(ee||(ee=Object(je.a)(["\n    background:#e5ddd5;\n    color:white;\n    padding:20px 10px 4px 10px;\n    border-radius:5px;\n    max-width:35%;\n    min-width:66px;\n    white-space:normal;\n    display:flex;\n    position:relative;\n    align-items:center;\n    overflow-wrap: break-word;\n    margin-right:4px;\n    margin-left:4px;\n    font-size:14px;\n    color:rgba(0, 0, 0, 0.6);\n"]))),Dn=["#F8485E ","#00C1D4","DarkCyan","DarkGoldenRod","DarkBlue","DarkRed","DarkOrange","Indigo","Purple","YellowGreen"],Cn=function(e){var n,t=e.match,o=Object(ue.useQuery)(Ee,{variables:{roomID:t.params.id}}),r=o.data,i=o.loading,a=(o.error,o.subscribeToMore),s=Object(de.g)(),c=Object(ne.useState)(!1),l=Object(be.a)(c,2),d=l[0],u=l[1],p=Object(ne.useState)(),b=Object(be.a)(p,2),j=b[0],x=b[1],m=Object(ue.useMutation)(Ne),g=Object(be.a)(m,2),h=g[0],f=g[1].loading,O=Object(ue.useMutation)(qe),y=Object(be.a)(O,1)[0],v=Object(ue.useMutation)(Ue),w=Object(be.a)(v,1)[0],I=Object(ue.useMutation)(Le,{onCompleted:function(e){s.push("/main-page")}}),R=Object(be.a)(I,1)[0],D=Object(se.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.user})),C=function(){n.value&&h({variables:{text:n.value||null,roomID:t.params.id||null,repliedMessage:null===j||void 0===j?void 0:j._id}})},k=function(){R({variables:{roomID:t.params.id}})};return Object(ne.useEffect)((function(){return function(){k()}}),[]),console.log(r),Object(ne.useEffect)((function(){a({variables:{roomID:t.params.id},document:Ge,updateQuery:function(e,n){var t=n.subscriptionData,o=t.data.message,r=t.data.message.actionType;switch(console.log(t),r){case"SEND":setTimeout((function(){document.querySelector(".chatMessages").scrollTo(0,7e3)}),0);var i=Object.assign({},e.getChatRoom,{messages:e.getChatRoom.messages.concat(o)});break;case"DELETE":i=Object.assign({},e.getChatRoom,{messages:e.getChatRoom.messages.filter((function(e){return e._id!=o._id}))});break;case"UPDATE":u(null);i=Object.assign({},e.getChatRoom,{messages:e.getChatRoom.messages.map((function(e){return e._id==o._id?Object.assign({},e,{text:o.text}):e}))});break;default:i=e.getChatRoom}return{getChatRoom:i}}}),a({variables:{roomID:t.params.id},document:ze,updateQuery:function(e,n){var t=n.subscriptionData.data.room;switch(t.actionType){case"JOIN":var o=Object.assign({},e.getChatRoom,{members:e.getChatRoom.members.concat(t.user)});break;case"LEAVE":o=Object.assign({},e.getChatRoom,{members:e.getChatRoom.members.filter((function(e){return e._id!=t.user._id}))});break;default:o=e.getChatRoom}return{getChatRoom:o}}})}),[]),Object(he.jsxs)(cn,{children:[Object(he.jsxs)(fn,{onClick:k,children:["LEAVE THE ROOM  ",Object(he.jsx)("i",{style:{fontSize:14,marginLeft:4},className:"fas fa-sign-out-alt"})]}),Object(he.jsxs)(dn,{children:[Object(he.jsxs)("span",{style:{color:"#ef4f4f",fontSize:13,fontWeight:"600",letterSpacing:1},children:["GROUP MEMBERS",Object(he.jsx)("span",{style:{marginLeft:5,fontWeight:600},children:r&&Object(he.jsxs)(te.a.Fragment,{children:[" ","(",r.getChatRoom.members.length+"/"+r.getChatRoom.limit,Object(he.jsx)("i",{style:{fontSize:10,marginLeft:2},className:"fas fa-user"}),")"]})})]}),Object(he.jsx)("ul",{style:{padding:0,listStyle:"none",width:"100%",marginTop:30},children:r&&r.getChatRoom.members.map((function(e,n){return Object(he.jsxs)("li",{style:{padding:5,width:"50%",display:"flex",fontSize:17.5,alignItems:"center"},children:[Object(he.jsx)("i",{className:"fas fa-user",style:{color:Dn[n],fontSize:15}}),Object(he.jsxs)("span",{style:{marginLeft:10,fontSize:14},children:[" ",e.username," "]}),r.getChatRoom.host._id==e._id&&Object(he.jsx)("i",{className:"fas fa-crown",style:{color:"#f0a500",fontSize:11,marginLeft:4}})]},e._id)}))})]}),Object(he.jsxs)(ln,{children:[i?" Messages are loading....":Object(he.jsx)(jn,{className:"chatMessages",children:r&&r.getChatRoom.messages.map((function(e,n){return Object(he.jsxs)(mn,{checkOwner:e.owner._id==D._id,children:[" ",Object(he.jsxs)(hn,{memberColor:Dn[r.getChatRoom.members.findIndex((function(n){return n._id==e.owner._id}))],children:[Object(he.jsxs)("span",{style:{fontSize:12},children:[" ",Object(he.jsx)("i",{className:"fas fa-user"})," ",e.owner.username,"  "]}),Object(he.jsxs)("span",{style:{color:"#628395"},children:["  ",e.date," "]})]}),e.repliedMessage&&Object(he.jsxs)(Rn,{children:[Object(he.jsxs)(wn,{color:Dn[null===r||void 0===r?void 0:r.getChatRoom.members.findIndex((function(n){return n._id==e.repliedMessage.owner._id}))],style:{top:4,left:4},children:[Object(he.jsx)("i",{className:"fas fa-user"}),Object(he.jsx)("span",{children:e.repliedMessage.owner.username}),Object(he.jsx)("span",{style:{marginLeft:3,color:"#628395"},children:e.repliedMessage.date})]}),e.repliedMessage.text]}),Object(he.jsx)(gn,{children:d==e._id?Object(he.jsx)(On,{onKeyDown:function(n){var o,r;"Enter"==n.key&&(o=e._id,r=n.target.value,w({variables:{messageID:o||null,roomID:t.params.id||null,updatedText:r||null}}))},defaultValue:e.text}):e.text}),e.owner._id==D._id?Object(he.jsxs)(te.a.Fragment,{children:[Object(he.jsx)(xn,{onClick:function(){return n=e._id,void y({variables:{messageID:n||null,roomID:t.params.id||null}});var n},children:Object(he.jsx)("i",{style:{color:"#ec4646"},className:"fas fa-trash-alt"})}),Object(he.jsx)(xn,{onClick:function(){return u(e._id)},children:Object(he.jsx)("i",{style:{color:"#ec4646"},className:"fas fa-edit"})}),Object(he.jsx)(xn,{onClick:function(){return x(e)},children:Object(he.jsx)("i",{style:{color:"#ec4646"},className:"fas fa-reply"})})]}):Object(he.jsx)(xn,{onClick:function(){return x(e)},children:Object(he.jsx)("i",{style:{color:"#ec4646"},className:"fas fa-reply"})})]},n)}))}),Object(he.jsxs)(yn,{isReplied:j,children:[Object(he.jsxs)(wn,{color:Dn[null===r||void 0===r?void 0:r.getChatRoom.members.findIndex((function(e){return e._id==(null===j||void 0===j?void 0:j.owner._id)}))],children:[Object(he.jsx)("i",{className:"fas fa-user"}),Object(he.jsx)("span",{children:null===j||void 0===j?void 0:j.owner.username}),Object(he.jsx)("span",{style:{marginLeft:8,color:"#628395"},children:null===j||void 0===j?void 0:j.date})]}),Object(he.jsx)(vn,{children:null===j||void 0===j?void 0:j.text}),Object(he.jsx)(In,{onClick:function(){return x(null)},children:Object(he.jsx)("i",{class:"fas fa-times"})})]}),Object(he.jsxs)(un,{children:[Object(he.jsx)(pn,{ref:function(e){return n=e},onKeyDown:function(e){"Enter"==e.key&&(C(),e.target.value="")},maxLength:"100"}),Object(he.jsxs)(bn,{onClick:C,children:[" ",f?Object(he.jsx)("img",{src:"/spin.gif",width:"30"}):"SEND"," "]})]})]})]})},kn=t(91),_n=function(e){var n=e.component,t=Object(kn.a)(e,["component"]),o=Object(de.g)(),r=Object(se.b)(),i=Object(ue.useLazyQuery)(ge,{context:{history:o},fetchPolicy:"network-only",onCompleted:function(e){var n=e.checkToken;r({type:"SET_USER",payload:n})}}),a=Object(be.a)(i,2),s=a[0],c=a[1],l=c.loading,d=c.data;return Object(ne.useEffect)((function(){s()}),[]),Object(he.jsx)(de.b,Object(ie.a)(Object(ie.a)({},t),{},{component:function(e){return!l&&d?Object(he.jsx)(n,Object(ie.a)({},e)):null}}))},Tn=t(88),Sn=t(2),En=new ue.HttpLink({uri:"https://groupchattappp.herokuapp.com/graphql"}),Mn=new Tn.a({uri:"wss://groupchattappp.herokuapp.com/subscriptions",options:{reconnect:!0,connectionParams:{token:localStorage.getItem("token")},timeout:3e4}}),$n=Object(ce.b)(_e,{user:{},error:{}}),Ln=Object(ue.split)((function(e){var n=e.query,t=Object(Sn.q)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),Mn,En),zn=Object(pe.a)((function(e){var n,t,o=e.graphQLErrors,r=e.networkError,i=e.operation.getContext().history;if(o){var a,s=Object(ae.a)(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;switch(c.extensions.code){case"UNAUTHENTICATED":$n.dispatch(Ye()),i.push("/login")}n="[".concat(c.extensions.code,"]"),t=t||c.message}}catch(l){s.e(l)}finally{s.f()}$n.dispatch({type:"SET_ERROR",payload:{errorType:n,message:t}})}r&&console.log(o)})),Nn=new ue.ApolloLink((function(e,n){var t=localStorage.getItem("token");return e.setContext({headers:Object(ie.a)(Object(ie.a)({},e.getContext().headers),{},{authorization:t?"Bearer ".concat(t):""})}),n(e)})),qn=new ue.ApolloClient({link:Object(ue.from)([Nn,zn,Ln]),cache:new ue.InMemoryCache});var Un=function(){return Object(he.jsx)(ue.ApolloProvider,{client:qn,children:Object(he.jsx)(le.a,{children:Object(he.jsx)(se.a,{store:$n,children:Object(he.jsxs)(de.d,{children:[Object(he.jsx)(de.b,{exact:!0,path:"/",component:function(){return Object(he.jsx)(de.a,{to:"/login"})}}),Object(he.jsx)(de.b,{path:"/login",component:Ie}),Object(he.jsx)(de.b,{path:"/register",component:ke}),Object(he.jsx)(_n,{path:"/main-page",component:sn,exact:!0}),Object(he.jsx)(_n,{path:"/room/:id",component:Cn,exact:!0})]})})})})},Gn=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,120)).then((function(n){var t=n.getCLS,o=n.getFID,r=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),o(e),r(e),i(e),a(e)}))};re.a.render(Object(he.jsx)(te.a.StrictMode,{children:Object(he.jsx)(Un,{})}),document.getElementById("root")),Gn()},96:function(e,n,t){},97:function(e,n,t){}},[[119,1,2]]]);
//# sourceMappingURL=main.2786562e.chunk.js.map