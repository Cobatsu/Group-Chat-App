{"version":3,"sources":["Chat-App/GraphqQL/Queries/AccountQuery.js","Chat-App/Containers/title-image.js","Chat-App/Containers/login.js","Chat-App/GraphqQL/Mutations/AccountMutation.js","Chat-App/Containers/register.js","Chat-App/Reducers/userReducer.js","Chat-App/GraphqQL/Queries/ChatRoomQuery.js","Chat-App/GraphqQL/Mutations/CatchRoomMutation.js","Chat-App/Containers/components/roomComp.js","Chat-App/Containers/home/userRooms.js","Chat-App/Containers/home/otherrooms.js","Chat-App/Actions/action.js","Chat-App/Containers/home/main-page.js","Chat-App/Containers/home/room.js","Chat-App/Containers/privateRoute.js","App.js","reportWebVitals.js","index.js"],"names":["LOGIN_QUERY","gql","CHECK_TOKEN_QUERY","TitleImage","text","style","color","textAlign","GeneralWrapper","styled","div","InnerWrapper","InputBox","input","SubmitButton","button","Form","Status","span","props","error","LoginPage","userNameRef","passwordRef","dispatch","useDispatch","history","useHistory","location","useLocation","username","queryString","parse","search","slice","useLazyQuery","onCompleted","loginUser","localStorage","setItem","jwt","type","payload","push","login","loading","placeholder","ref","value","display","width","justifyContent","alignItems","marginTop","onClick","variables","user","password","to","pathname","textDecoration","fontSize","margin","flexShrink","REGISTER_MUTATION","RegisterPage","email","useSelector","state","useMutation","registerUser","onError","console","log","register","data","UserReducer","action","GET_USER_ROOMS_QUERY","GET_OTHER_ROOMS_QUERY","GET_CHAT_ROOM_QUERY","CREATE_ROOM_MUTATION","JOIN_ROOM_MUTATION","LEAVE_ROOM_MUTATION","MEMBER_JOINED_ROOM","SEND_MESSAGE_MUTATION","DELETE_MESSAGE_MUTATION","UPDATE_MESSAGE_MUTATION","MESSAGE","InnerRooms","Room","room","joinRoom","userRoom","useState","members","setMembers","messages","setMessages","targetRoom","useSubscription","roomID","_id","onSubscriptionData","subscriptionData","actionType","prev","concat","filter","u","message","lastTimeSee","find","visitedRoom","numberOfUnreadMessages","reduce","curr","Date","date","split","getTime","time","length","limit","flex","marginRight","className","title","host","background","height","borderRadius","marginLeft","Container","Rooms","UserRooms","timeToRefetch","setTimeToRefetch","useQuery","fetchPolicy","refetch","join","storeError","useEffect","then","id","memberLength","e","errorType","getUserRooms","map","Refresh","OtherRooms","position","getOtherRooms","logout","removeItem","client","clearStore","InnerDiv","LogOut","UserInformation","Innerbuttons","Profile","TextSpan","Button","InnerInputWrapper","MainPage","currentUser","create","Fragment","src","marginBottom","alt","Array","fill","_","index","toLowerCase","parseInt","ChatBox","Members","TextPart","ChatTextInput","Send","Messages","ul","EditTextBubble","InnerMessage","li","checkOwner","TextBubble","TextInformationBubble","memberColor","LeaveGroup","UpdateText","ReplyWrapper","isReplied","ReplyText","RepliedMessageInfo","RepliedMessageInfo2","ReplyCloseIcon","RepliedMessageTextBubble","memberColors","chatText","match","params","err","subscribeToMore","isBeingUpdatedID","setIsBeingUpdatedID","setIsReplied","send","Loading","deleteMessage","updateMessage","leaveRoom","prevMessagesLength","useRef","current","usePrevious","getChatRoom","currentMessagesLength","OnSendMessage","repliedMessage","scrollToBottom","chatBox","document","querySelector","scrollTop","scrollHeight","onLeaveRoom","url","updateQuery","subMessage","updatedData","Object","assign","lastData","msg","isEdited","joinedMember","mergedData","m","fontWeight","letterSpacing","padding","listStyle","member","owner","findIndex","top","left","onKeyDown","ID","key","target","messageID","updatedText","defaultValue","maxLength","PrivateRoute","Component","component","rest","loadingC","setLoadingC","prevPath","path","currentPath","context","notifyOnNetworkStatusChange","checkToken","check","httpTerminatingLink","HttpLink","uri","wsLink","WebSocketLink","options","reconnect","connectionParams","token","getItem","window","timeout","store","createStore","splitLink","query","definition","getMainDefinition","kind","operation","errorLink","graphQLErrors","networkError","el","extensions","code","href","middleWareLink","ApolloLink","forward","setContext","headers","getContext","authorization","ApolloClient","link","from","cache","InMemoryCache","App","exact","Login","Register","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.96e513fb.chunk.js","sourcesContent":["import { gql } from \"@apollo/client\";\r\n\r\nexport const LOGIN_QUERY = gql`\r\n  query Login($user: LoginInput!) {\r\n    loginUser(user: $user) {\r\n      username\r\n      email\r\n      jwt\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CHECK_TOKEN_QUERY = gql`\r\n  query Check {\r\n    checkToken {\r\n      username\r\n      email\r\n      _id\r\n      lastTimeSee {\r\n        time\r\n        roomID\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\n\r\nexport const TitleImage = ({text}) => (\r\n <h1 style={{color: \"#5d00ba\", textAlign: \"center\"}}> {text} </h1>\r\n);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\nimport {useLazyQuery} from \"@apollo/client\";\r\nimport {LOGIN_QUERY} from \"../GraphqQL/Queries/AccountQuery\";\r\nimport {TitleImage} from \"./title-image\";\r\nimport {Link, useHistory, useLocation} from \"react-router-dom\";\r\nimport queryString from \"querystring\";\r\n\r\nconst GeneralWrapper = styled.div`\r\n display: flex;\r\n justify-content: center;\r\n align-items: center;\r\n flex-direction: column;\r\n height: 70%;\r\n width: 100%;\r\n flex-shrink: 0;\r\n`;\r\n\r\nconst InnerWrapper = styled.div`\r\n display: flex;\r\n align-items: center;\r\n flex-direction: column;\r\n flex-shrink: 0;\r\n`;\r\n\r\nconst InputBox = styled.input`\r\n margin-bottom: 10px;\r\n border-radius: 7px;\r\n padding: 10px;\r\n box-sizing: border-box;\r\n width: 100%;\r\n border: solid 1.5px #d3d3d3;\r\n flex-shrink: 0;\r\n`;\r\n\r\nconst SubmitButton = styled.button`\r\n outline: none;\r\n border: none;\r\n padding: 12px 15px;\r\n border-radius: 5px;\r\n background: #7f03fc;\r\n flex-shrink: 0;\r\n color: white;\r\n &:hover {\r\n  cursor: pointer;\r\n }\r\n`;\r\n\r\nconst Form = styled.div`\r\n display: flex;\r\n flex-direction: column;\r\n align-items: center;\r\n width: 65%;\r\n flex-shrink: 0;\r\n`;\r\n\r\nconst Status = styled.span`\r\n color: ${props => (props.error ? \"red\" : \"#7f03fc\")};\r\n font-weight: 600;\r\n font-size: 14px;\r\n margin-bottom: 18px;\r\n`;\r\n\r\nconst LoginPage = props => {\r\n const dispatch = useDispatch();\r\n const history = useHistory();\r\n const location = useLocation();\r\n const {username} = queryString.parse(location.search.slice(1));\r\n var userNameRef, passwordRef;\r\n\r\n const [login, {loading, error}] = useLazyQuery(LOGIN_QUERY, {\r\n  onCompleted: ({loginUser}) => {\r\n   localStorage.setItem(\"token\", loginUser.jwt);\r\n\r\n   dispatch({type: \"SET_USER\", payload: loginUser});\r\n\r\n   history.push(\"/main-page\");\r\n  },\r\n });\r\n\r\n const onLogin = () => {\r\n  login({\r\n   variables: {\r\n    user: {\r\n     username: userNameRef.value || null,\r\n     password: passwordRef.value || null,\r\n    },\r\n   },\r\n  });\r\n };\r\n\r\n return (\r\n  <GeneralWrapper>\r\n   <InnerWrapper>\r\n    <TitleImage text='Welcome To The Group-Chat !' />{\" \"}\r\n    {username && !loading && !error ? (\r\n     <Status style={{color: \"#368B85\"}}> You Registered. Lets Sign In !</Status>\r\n    ) : null}\r\n    {loading ? (\r\n     <Status>Redirecting...</Status>\r\n    ) : error ? (\r\n     <Status error> Username or Password Incorrect !</Status>\r\n    ) : null}\r\n    <Form>\r\n     <InputBox\r\n      placeholder='Username'\r\n      ref={ref => (userNameRef = ref)}\r\n      value={username}\r\n     />\r\n     <InputBox\r\n      placeholder='Password'\r\n      ref={ref => (passwordRef = ref)}\r\n      type='password'\r\n     />\r\n     <div\r\n      style={{\r\n       display: \"flex\",\r\n       width: \"100%\",\r\n       justifyContent: \"space-between\",\r\n       alignItems: \"center\",\r\n       marginTop: 7,\r\n      }}\r\n     >\r\n      <SubmitButton\r\n       onClick={() => {\r\n        onLogin();\r\n       }}\r\n      >\r\n       {\" \"}\r\n       LOG IN{\" \"}\r\n      </SubmitButton>\r\n      <Link\r\n       to={{pathname: \"/register\"}}\r\n       style={{\r\n        textDecoration: \"none\",\r\n        color: \"#5d00ba\",\r\n        fontSize: 13,\r\n        margin: 5,\r\n        flexShrink: 0,\r\n       }}\r\n      >\r\n       {\" \"}\r\n       Don't you have an account yet?{\" \"}\r\n      </Link>\r\n     </div>\r\n    </Form>\r\n   </InnerWrapper>\r\n  </GeneralWrapper>\r\n );\r\n};\r\n\r\nexport default LoginPage;\r\n","import {gql} from '@apollo/client'\r\n\r\nexport const REGISTER_MUTATION = gql`\r\n\r\n    mutation Register($user:RegisterInput!){\r\n\r\n        registerUser(user:$user) {\r\n            username\r\n        }\r\n\r\n    }\r\n    \r\n`","import {useMutation} from \"@apollo/client\";\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {REGISTER_MUTATION} from \"../GraphqQL/Mutations/AccountMutation\";\r\nimport {TitleImage} from \"./title-image\";\r\nimport {Link, useHistory} from \"react-router-dom\";\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\n\r\nconst GeneralWrapper = styled.div`\r\n display: flex;\r\n justify-content: center;\r\n align-items: center;\r\n flex-direction: column;\r\n height: 70%;\r\n width: 100%;\r\n`;\r\n\r\nconst InnerWrapper = styled.div`\r\n display: flex;\r\n align-items: center;\r\n flex-direction: column;\r\n`;\r\n\r\nconst InputBox = styled.input`\r\n margin-bottom: 10px;\r\n border-radius: 7px;\r\n padding: 10px;\r\n box-sizing: border-box;\r\n width: 100%;\r\n border: solid 1.5px #d3d3d3;\r\n`;\r\n\r\nconst SubmitButton = styled.button`\r\n outline: none;\r\n border: none;\r\n padding: 12px 15px;\r\n border-radius: 5px;\r\n background: #7f03fc;\r\n color: white;\r\n &:hover {\r\n  cursor: pointer;\r\n }\r\n`;\r\n\r\nconst Form = styled.div`\r\n display: flex;\r\n flex-direction: column;\r\n align-items: center;\r\n width: 65%;\r\n`;\r\n\r\nconst Status = styled.span`\r\n color: ${props => (props.error ? \"red\" : \"#7f03fc\")};\r\n font-weight: 600;\r\n font-size: 14px;\r\n margin-bottom: 18px;\r\n`;\r\n\r\nconst RegisterPage = props => {\r\n const history = useHistory();\r\n const errorState = useSelector((state = {}) => state.error);\r\n const [register, {data, loading, error}] = useMutation(REGISTER_MUTATION, {\r\n  onCompleted: ({registerUser}) => {\r\n   history.push(`/login/?username=${registerUser.username}`);\r\n  },\r\n  onError: error => {\r\n   console.log(error);\r\n  },\r\n });\r\n let userNameRef, passwordRef, email;\r\n const onRegister = () => {\r\n  register({\r\n   variables: {\r\n    user: {\r\n     username: userNameRef.value || null,\r\n     email: email.value || null,\r\n     password: passwordRef.value || null,\r\n    },\r\n   },\r\n  });\r\n };\r\n return (\r\n  <GeneralWrapper>\r\n   <InnerWrapper>\r\n    <TitleImage text='Register to the Group-Chat' />\r\n\r\n    {loading ? <Status> Registering... </Status> : null}\r\n    {error ? <Status error> Please Fill All Fields Correctly !</Status> : null}\r\n    <Form>\r\n     <InputBox placeholder='Username' ref={ref => (userNameRef = ref)} />\r\n     <InputBox placeholder='email' ref={ref => (email = ref)} />\r\n     <InputBox\r\n      placeholder='Password'\r\n      ref={ref => (passwordRef = ref)}\r\n      type='password'\r\n     />\r\n     <div\r\n      style={{\r\n       width: \"100%\",\r\n       display: \"flex\",\r\n       justifyContent: \"space-between\",\r\n       alignItems: \"center\",\r\n       marginTop: 7,\r\n      }}\r\n     >\r\n      <SubmitButton\r\n       onClick={() => {\r\n        onRegister();\r\n       }}\r\n      >\r\n       {\" \"}\r\n       REGISTER{\" \"}\r\n      </SubmitButton>\r\n      <Link\r\n       to={{\r\n        pathname: \"/login\",\r\n       }}\r\n       style={{\r\n        textDecoration: \"none\",\r\n        fontSize: 13,\r\n        color: \"#5d00ba\",\r\n        margin: 5,\r\n       }}\r\n      >\r\n       {\" \"}\r\n       Go to Login Page !{\" \"}\r\n      </Link>\r\n     </div>\r\n    </Form>\r\n   </InnerWrapper>\r\n  </GeneralWrapper>\r\n );\r\n};\r\n\r\nexport default RegisterPage;\r\n","import { client } from '../../App'\r\n\r\n\r\nconst UserReducer = ( state , action )=>{\r\n \r\n    \r\n    switch( action.type ) {\r\n\r\n        case \"SET_USER\": \r\n\r\n            return {\r\n                ...state,\r\n                user:action.payload,\r\n            }\r\n\r\n        case \"SET_ERROR\": \r\n\r\n            return {\r\n                ...state,\r\n                 error:action.payload\r\n            }\r\n            \r\n\r\n        case \"LOGOUT\": \r\n\r\n            return {\r\n                ...action.payload\r\n            }   \r\n        \r\n        default: \r\n\r\n            return state\r\n            \r\n            break;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default UserReducer;","import { gql } from \"@apollo/client\";\r\n\r\nexport const GET_USER_ROOMS_QUERY = gql`\r\n  query GetRooms {\r\n    getUserRooms {\r\n      _id\r\n      limit\r\n      title\r\n      members {\r\n        username\r\n        _id\r\n      }\r\n      messages {\r\n        date\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_OTHER_ROOMS_QUERY = gql`\r\n  query GetOtherRooms {\r\n    getOtherRooms {\r\n      _id\r\n      limit\r\n      title\r\n      members {\r\n        username\r\n        _id\r\n      }\r\n      host {\r\n        username\r\n        _id\r\n      }\r\n      messages {\r\n        date\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_CHAT_ROOM_QUERY = gql`\r\n  query GetChatRoom($roomID: ID!) {\r\n    getChatRoom(roomID: $roomID) {\r\n      limit\r\n\r\n      host {\r\n        _id\r\n      }\r\n\r\n      messages {\r\n        _id\r\n        text\r\n        owner {\r\n          username\r\n          _id\r\n        }\r\n        isEdited\r\n        date\r\n        repliedMessage {\r\n          _id\r\n          owner {\r\n            username\r\n            _id\r\n          }\r\n          text\r\n          date\r\n        }\r\n      }\r\n\r\n      members {\r\n        username\r\n        _id\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import {gql} from '@apollo/client'\r\n\r\nexport const CREATE_ROOM_MUTATION = gql`\r\n\r\n    mutation CreateRoom($room:RoomInput!){\r\n\r\n        createRoom(room:$room) {\r\n            title\r\n            limit\r\n        }\r\n\r\n    }\r\n    \r\n`\r\n\r\nexport const JOIN_ROOM_MUTATION = gql`\r\n    mutation JoinRoom($roomID:ID!,$limit:Int!,$memberLength:Int!) {\r\n        joinRoom(roomID:$roomID,limit:$limit,memberLength:$memberLength) {\r\n            _id\r\n            title\r\n            limit\r\n        }\r\n    }\r\n`\r\n\r\nexport const LEAVE_ROOM_MUTATION = gql`\r\n\r\n    mutation LeaveRoom($roomID:ID!) {\r\n\r\n        leaveRoom(roomID:$roomID) {\r\n\r\n            title\r\n            _id\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n`\r\n\r\n\r\nexport const MEMBER_JOINED_ROOM = gql`\r\n\r\n    subscription MemberJoined($roomID:ID) {\r\n        room(roomID:$roomID) {\r\n\r\n             user {\r\n                username\r\n                _id         \r\n             }\r\n            \r\n             roomID\r\n             actionType\r\n        }\r\n    }\r\n\r\n`\r\n\r\nexport const SEND_MESSAGE_MUTATION = gql`\r\n\r\n    mutation SendMessage($text:String!,$roomID:ID!,$repliedMessage:ID) {\r\n        sendMessage(text:$text,roomID:$roomID,repliedMessage:$repliedMessage) {\r\n            _id\r\n            text\r\n        }\r\n    }\r\n\r\n`\r\n\r\nexport const DELETE_MESSAGE_MUTATION = gql`\r\n\r\n    mutation DeleteMessage($messageID:ID!,$roomID:ID!) {\r\n\r\n        deleteMessage(messageID:$messageID,roomID:$roomID) {\r\n            _id\r\n            text\r\n        }\r\n    }\r\n`\r\nexport const UPDATE_MESSAGE_MUTATION = gql`\r\n\r\n    mutation UpdateMessage($messageID:ID!,$updatedText:String!,$roomID:ID!) {\r\n\r\n        updateMessage(messageID:$messageID,updatedText:$updatedText,roomID:$roomID){\r\n\r\n            _id\r\n            text\r\n        }\r\n\r\n    }\r\n\r\n`\r\n\r\nexport const MESSAGE = gql`\r\n\r\n    subscription MessageSent($roomID:ID!) {\r\n\r\n        message(roomID:$roomID) {\r\n            _id\r\n            text\r\n            date\r\n            isEdited\r\n            owner {\r\n                username\r\n                _id\r\n            }\r\n            actionType\r\n        }\r\n\r\n    }\r\n\r\n`\r\n\r\n\r\n\r\n","import React, {useState} from \"react\";\r\nimport {useSubscription} from \"@apollo/client\";\r\nimport styled from \"styled-components\";\r\nimport {MEMBER_JOINED_ROOM} from \"../../GraphqQL/Mutations/CatchRoomMutation\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {MESSAGE} from \"../../GraphqQL/Mutations/CatchRoomMutation\";\r\n\r\nconst InnerRooms = styled.div`\r\n display: flex;\r\n\r\n padding: 10px;\r\n align-items: center;\r\n &:hover {\r\n  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px,\r\n   rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\r\n  cursor: pointer;\r\n }\r\n`;\r\n\r\nexport const Room = ({room, joinRoom, userRoom}) => {\r\n // it iss so logical to set useSubscription in every room component\r\n\r\n const [members, setMembers] = useState(room.members);\r\n const [messages, setMessages] = useState(room.messages);\r\n\r\n const joinSubs = useSubscription(MEMBER_JOINED_ROOM, {\r\n  variables: {\r\n   roomID: room._id,\r\n  },\r\n  onSubscriptionData: ({subscriptionData}) => {\r\n   if (subscriptionData.data.room.actionType == \"JOIN\") {\r\n    setMembers(prev => prev.concat(subscriptionData.data.room.user));\r\n   } else if (subscriptionData.data.room.actionType == \"LEAVE\") {\r\n    setMembers(prev =>\r\n     prev.filter(u => subscriptionData.data.room.user._id != u._id)\r\n    );\r\n   }\r\n  },\r\n });\r\n const messageSubs = useSubscription(MESSAGE, {\r\n  variables: {\r\n   roomID: room._id,\r\n  },\r\n  onSubscriptionData: ({subscriptionData}) => {\r\n   if (subscriptionData.data.message.actionType == \"SEND\") {\r\n    setMessages(prev => prev.concat(subscriptionData.data.message));\r\n   }\r\n  },\r\n });\r\n\r\n const currentUser = useSelector((state = {}) => state.user);\r\n const targetRoom = currentUser.lastTimeSee?.find(visitedRoom => {\r\n  return visitedRoom.roomID == room._id;\r\n });\r\n let numberOfUnreadMessages = !targetRoom\r\n  ? messages.length\r\n  : messages.reduce((prev, curr) => {\r\n     const messageSentDate = new Date(curr.date.split(\"-\")[1]).getTime();\r\n     const lastDateSeen = new Date(+targetRoom.time).getTime();\r\n     if (messageSentDate > lastDateSeen) {\r\n      return ++prev;\r\n     } else {\r\n      return prev;\r\n     }\r\n    }, 0);\r\n return (\r\n  <InnerRooms\r\n   key={room._id}\r\n   onClick={joinRoom(room._id, room.limit, members.length)}\r\n  >\r\n   <span\r\n    style={{\r\n     display: \"flex\",\r\n     alignItems: \"center\",\r\n     justifyContent: \"flex-start\",\r\n     flex: 1,\r\n    }}\r\n   >\r\n    <i\r\n     style={{\r\n      marginRight: 8,\r\n      color: userRoom ? \"#f05454\" : \"#00af91\",\r\n     }}\r\n     className='fas fa-comment'\r\n    ></i>\r\n    {room.title.length > 10 ? room.title.slice(0, 5) + \"...\" : room.title}{\" \"}\r\n   </span>\r\n   {!userRoom && (\r\n    <span\r\n     style={{\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"flex-start\",\r\n      flex: 1,\r\n     }}\r\n    >\r\n     <i\r\n      style={{\r\n       marginRight: 8,\r\n       color: \"#00af91\",\r\n      }}\r\n      className='fas fa-wifi'\r\n     ></i>\r\n     {room.host.username}{\" \"}\r\n    </span>\r\n   )}\r\n   <span\r\n    style={{\r\n     display: \"flex\",\r\n     alignItems: \"center\",\r\n     color: members.length === room.limit ? \"red\" : \"#76a21e\",\r\n     justifyContent: \"space-between\",\r\n     flex: 0.2,\r\n    }}\r\n   >\r\n    <i\r\n     style={{\r\n      marginRight: 8,\r\n      color: userRoom ? \"#f05454\" : \"#00af91\",\r\n     }}\r\n     className='fas fa-user-friends'\r\n    ></i>\r\n    {members.length + \"/\" + room.limit}{\" \"}\r\n   </span>\r\n   {numberOfUnreadMessages > 0 && (\r\n    <span\r\n     style={{\r\n      background: \"#FF6767\",\r\n      width: 20,\r\n      height: 20,\r\n      borderRadius: \"50%\",\r\n      color: \"white\",\r\n      marginLeft: 10,\r\n      fontSize: 11,\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n     }}\r\n    >\r\n     {numberOfUnreadMessages}{\" \"}\r\n    </span>\r\n   )}{\" \"}\r\n  </InnerRooms>\r\n );\r\n};\r\n","import React, {useEffect} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {useQuery, useMutation} from \"@apollo/client\";\r\nimport {GET_USER_ROOMS_QUERY} from \"../../GraphqQL/Queries/ChatRoomQuery\";\r\nimport {JOIN_ROOM_MUTATION} from \"../../GraphqQL/Mutations/CatchRoomMutation\";\r\nimport {Room} from \"../components/roomComp\";\r\n\r\nconst Container = styled.div`\r\n padding: 15px;\r\n display: flex;\r\n flex-direction: column;\r\n box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px,\r\n  rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\r\n width: 40%;\r\n height: 90%;\r\n box-sizing: border-box;\r\n`;\r\n\r\nconst Rooms = styled.div`\r\n width: 100%;\r\n height: 100%;\r\n display: flex;\r\n flex-direction: column;\r\n margin-top: 25px;\r\n`;\r\n\r\nconst UserRooms = ({timeToRefetch, setTimeToRefetch}) => {\r\n const {data, loading, error, refetch} = useQuery(GET_USER_ROOMS_QUERY, {\r\n  fetchPolicy: \"network-only\",\r\n });\r\n\r\n const history = useHistory();\r\n\r\n const [join] = useMutation(JOIN_ROOM_MUTATION, {\r\n  onError: error => console.log(error),\r\n\r\n  onCompleted: ({joinRoom}) => {\r\n   history.push(\"/room/\" + joinRoom._id);\r\n  },\r\n });\r\n\r\n const storeError = useSelector((state = {}) => state.error);\r\n\r\n useEffect(() => {\r\n  if (timeToRefetch) {\r\n   refetch().then(() => {\r\n    setTimeToRefetch(false);\r\n   });\r\n  }\r\n }, [timeToRefetch]);\r\n\r\n const joinRoom = (id, limit, memberLength) => e => {\r\n  join({\r\n   variables: {\r\n    roomID: id,\r\n    limit,\r\n    memberLength,\r\n   },\r\n  });\r\n };\r\n return (\r\n  <Container>\r\n   <span style={{textAlign: \"center\"}}>My Rooms</span>\r\n   <Rooms>\r\n    {\" \"}\r\n    {loading ? (\r\n     <span>Fetching...</span>\r\n    ) : error ? (\r\n     <span> {storeError.errorType + \" \" + storeError.message} </span>\r\n    ) : (\r\n     data.getUserRooms.map(room => {\r\n      return (\r\n       <Room key={room._id} room={room} joinRoom={joinRoom} userRoom={true} />\r\n      );\r\n     })\r\n    )}{\" \"}\r\n   </Rooms>\r\n  </Container>\r\n );\r\n};\r\n\r\nexport default UserRooms;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport { GET_OTHER_ROOMS_QUERY } from \"../../GraphqQL/Queries/ChatRoomQuery\";\r\nimport { JOIN_ROOM_MUTATION } from \"../../GraphqQL/Mutations/CatchRoomMutation\";\r\nimport { Room } from \"../components/roomComp\";\r\n\r\nconst Container = styled.div`\r\n  padding: 15px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px,\r\n    rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\r\n  width: 40%;\r\n  height: 90%;\r\n  box-sizing: border-box;\r\n`;\r\nconst Rooms = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-top: 25px;\r\n`;\r\n\r\nconst Refresh = styled.div`\r\n  position: absolute;\r\n  left: 0;\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\nconst OtherRooms = () => {\r\n  const { data, loading, error, refetch } = useQuery(GET_OTHER_ROOMS_QUERY, {\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n  const history = useHistory();\r\n  const [join] = useMutation(JOIN_ROOM_MUTATION, {\r\n    onError: (error) => console.log(error),\r\n    onCompleted: ({ joinRoom }) => {\r\n      history.push(\"/room/\" + joinRoom._id);\r\n    },\r\n  });\r\n  const storeError = useSelector((state = {}) => state.error);\r\n  const joinRoom = (id, limit, memberLength) => (e) => {\r\n    join({\r\n      variables: {\r\n        roomID: id,\r\n        limit,\r\n        memberLength,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <span style={{ textAlign: \"center\", position: \"relative\" }}>\r\n        Other Rooms\r\n        <Refresh onClick={() => refetch()} className=\"fas fa-sync\"></Refresh>\r\n      </span>\r\n      <Rooms>\r\n        {loading ? (\r\n          <span> Rooms are loading... </span>\r\n        ) : error ? (\r\n          <span> {storeError.errorType + \" \" + storeError.message} </span>\r\n        ) : (\r\n          data.getOtherRooms.map((room) => {\r\n            return <Room key={room._id} room={room} joinRoom={joinRoom} />;\r\n          })\r\n        )}\r\n      </Rooms>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default OtherRooms;\r\n","import { client } from '../../App'\r\n\r\nexport const logout = ()=>{ // we can use actions to do some operations about the login state\r\n\r\n        localStorage.removeItem('token');\r\n        client.clearStore();\r\n\r\n        return {\r\n           type:'LOGOUT',\r\n           payload:{\r\n               user:{},\r\n               error:{}\r\n           }\r\n        }\r\n\r\n}","import React, {useState} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {useSelector, useDispatch} from \"react-redux\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport UserRooms from \"./userRooms\";\r\nimport OtherRooms from \"./otherrooms\";\r\nimport {logout} from \"../../Actions/action\"; // import RoomQuery from './roomQuery'\r\nimport {useMutation} from \"@apollo/client\";\r\nimport {CREATE_ROOM_MUTATION} from \"../../GraphqQL/Mutations/CatchRoomMutation\";\r\n\r\nconst GeneralWrapper = styled.div`\r\n display: flex;\r\n justify-content: space-around;\r\n align-items: center;\r\n height: 100%;\r\n width: 88%;\r\n margin: 0 auto;\r\n`;\r\n\r\nconst InnerDiv = styled.div`\r\n height: 500px;\r\n box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px,\r\n  rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\r\n flex: 0.75;\r\n display: flex;\r\n justify-content: space-evenly;\r\n align-items: center;\r\n box-sizing: border-box;\r\n padding: 10px;\r\n`;\r\n\r\nconst LogOut = styled.div`\r\n position: fixed;\r\n height: 40px;\r\n width: 100px;\r\n top: 10px;\r\n left: 10px;\r\n box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px,\r\n  rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\r\n &:hover {\r\n  cursor: pointer;\r\n  background: blue;\r\n  color: white;\r\n  transition: 100ms;\r\n }\r\n display: flex;\r\n align-items: center;\r\n justify-content: center;\r\n`;\r\n\r\nconst UserInformation = styled.div`\r\n display: flex;\r\n flex-direction: column;\r\n align-items: flex-start;\r\n width: 70%;\r\n`;\r\nconst Innerbuttons = styled.div`\r\n display: flex;\r\n flex-direction: column;\r\n align-items: center;\r\n width: 100%;\r\n margin-top: 30px;\r\n`;\r\n\r\nconst Profile = styled.div`\r\n box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px,\r\n  rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\r\n height: 500px;\r\n flex: 0.2;\r\n display: flex;\r\n flex-direction: column;\r\n border-radius: 8px;\r\n align-items: center;\r\n`;\r\nconst TextSpan = styled.span`\r\n font-size: 13px;\r\n margin: 3px;\r\n`;\r\nconst Button = styled.button`\r\n border: none;\r\n padding: 10px;\r\n width: 100%;\r\n margin-top: 15px;\r\n display: flex;\r\n justify-content: space-around;\r\n cursor: pointer;\r\n &:hover {\r\n  box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px -1px,\r\n   rgba(0, 0, 0, 0.06) 0px 2px 4px -1px;\r\n }\r\n`;\r\nconst InnerInputWrapper = styled.div`\r\n display: flex;\r\n flex-direction: column;\r\n width: 80%;\r\n font-size: 14px;\r\n margin-top: 20px;\r\n`;\r\n\r\nconst MainPage = props => {\r\n const currentUser = useSelector((state = {}) => state.user || {});\r\n const [create, {error}] = useMutation(CREATE_ROOM_MUTATION, {\r\n  onError: error => {\r\n   console.log(error);\r\n  },\r\n });\r\n\r\n const dispatch = useDispatch();\r\n const history = useHistory();\r\n const storeError = useSelector((state = {}) => state.error);\r\n const [timeToRefetch, setTimeToRefetch] = useState(false);\r\n\r\n let limit, title;\r\n\r\n const onLogout = () => {\r\n  localStorage.removeItem(\"token\");\r\n  dispatch(logout());\r\n  history.push(\"/login\");\r\n };\r\n\r\n const createRoom = () => {\r\n  create({\r\n   variables: {\r\n    room: {\r\n     title: title.value.toLowerCase() || null,\r\n     limit: parseInt(limit.value) || null,\r\n    },\r\n   },\r\n  }).then(() => {\r\n   setTimeToRefetch(true);\r\n  });\r\n };\r\n\r\n return (\r\n  <React.Fragment>\r\n   <GeneralWrapper>\r\n    <LogOut onClick={onLogout}>LOG OUT</LogOut>\r\n\r\n    <Profile>\r\n     <img\r\n      src='/userpng.png'\r\n      width='60%'\r\n      style={{\r\n       marginBottom: 20,\r\n       marginTop: 20,\r\n      }}\r\n      alt={\"user\"}\r\n     />\r\n\r\n     <UserInformation>\r\n      <TextSpan>username : {currentUser.username} </TextSpan>\r\n      <TextSpan>email : {currentUser.email} </TextSpan>\r\n     </UserInformation>\r\n\r\n     <Innerbuttons>\r\n      <InnerInputWrapper>\r\n       <div\r\n        style={{\r\n         display: \"flex\",\r\n         justifyContent: \"space-between\",\r\n         width: \"100%\",\r\n        }}\r\n       >\r\n        <span>Title :</span>\r\n        <input\r\n         ref={ref => (title = ref)}\r\n         style={{width: \"50%\"}}\r\n         placeholder='title'\r\n        />\r\n       </div>\r\n\r\n       <div\r\n        style={{\r\n         display: \"flex\",\r\n         marginTop: 6,\r\n         justifyContent: \"space-between\",\r\n         width: \"100%\",\r\n        }}\r\n       >\r\n        <span>Max People :</span>\r\n\r\n        <select style={{width: \"100px\"}} ref={ref => (limit = ref)}>\r\n         {Array(10)\r\n          .fill()\r\n          .map((_, index) => (\r\n           <option key={index}>{index + 1} </option>\r\n          ))}{\" \"}\r\n        </select>\r\n       </div>\r\n\r\n       <span style={{color: \"red\"}}>\r\n        {\" \"}\r\n        {error && storeError.errorType + \" \" + storeError.message}{\" \"}\r\n       </span>\r\n       <Button onClick={createRoom}>\r\n        {\" \"}\r\n        Create Room\r\n        <i className='fas fa-plus'></i>{\" \"}\r\n       </Button>\r\n      </InnerInputWrapper>\r\n      {/* <InnerInputWrapper>\r\n\r\n                         \r\n                            <input style={{width:'100%'}} placeholder=\"Search...\"/>\r\n\r\n                            <Button onClick={createRoom}> Search Room  <i className=\"fas fa-search\"></i> </Button>\r\n\r\n                    </InnerInputWrapper> */}{\" \"}\r\n     </Innerbuttons>\r\n    </Profile>\r\n\r\n    <InnerDiv>\r\n     <UserRooms\r\n      timeToRefetch={timeToRefetch}\r\n      setTimeToRefetch={setTimeToRefetch}\r\n     />\r\n     <OtherRooms />\r\n    </InnerDiv>\r\n   </GeneralWrapper>\r\n  </React.Fragment>\r\n );\r\n};\r\n\r\nexport default MainPage;\r\n","import React, {useEffect, useState, useRef} from \"react\";\r\nimport {useQuery, useMutation} from \"@apollo/client\";\r\nimport {GET_CHAT_ROOM_QUERY} from \"../../GraphqQL/Queries/ChatRoomQuery\";\r\nimport {\r\n SEND_MESSAGE_MUTATION,\r\n MESSAGE,\r\n MEMBER_JOINED_ROOM,\r\n DELETE_MESSAGE_MUTATION,\r\n LEAVE_ROOM_MUTATION,\r\n UPDATE_MESSAGE_MUTATION,\r\n} from \"../../GraphqQL/Mutations/CatchRoomMutation\";\r\nimport styled from \"styled-components\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nlet x;\r\n\r\nconst GeneralWrapper = styled.div`\r\n display: flex;\r\n justify-content: center;\r\n align-items: center;\r\n height: 100%;\r\n margin: 0 auto;\r\n background: #242c37;\r\n position: relative;\r\n`;\r\nconst ChatBox = styled.div`\r\n height: 530px;\r\n box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em,\r\n  rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em,\r\n  rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\r\n display: flex;\r\n flex-direction: column;\r\n justify-content: space-between;\r\n align-items: center;\r\n box-sizing: border-box;\r\n width: 44%;\r\n margin-left: 20px;\r\n padding: 10px;\r\n background: white;\r\n`;\r\nconst Members = styled.div`\r\n box-shadow: rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em,\r\n  rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em,\r\n  rgba(255, 255, 255, 0.1) 0px 0px 0px 1px inset;\r\n height: 530px;\r\n width: 19%;\r\n display: flex;\r\n flex-direction: column;\r\n\r\n align-items: center;\r\n box-sizing: border-box;\r\n padding: 10px;\r\n background: white;\r\n`;\r\n// ................................\r\n\r\nconst TextPart = styled.div`\r\n display: flex;\r\n justify-content: space-between;\r\n width: 100%;\r\n`;\r\n\r\nconst ChatTextInput = styled.input`\r\n flex: 0.83;\r\n height: 30px;\r\n font-size: 17px;\r\n background: #628395;\r\n color: white;\r\n border: none;\r\n padding: 5px 10px;\r\n outline: none;\r\n`;\r\n\r\nconst Send = styled.button`\r\n background: #ef4f4f;\r\n color: white;\r\n border: none;\r\n flex: 0.15;\r\n &:hover {\r\n  cursor: pointer;\r\n }\r\n`;\r\n\r\nconst Messages = styled.ul`\r\n flex: 0.94;\r\n width: 100%;\r\n display: flex;\r\n flex-direction: column;\r\n list-style: none;\r\n margin: 0;\r\n padding: 0;\r\n overflow: scroll;\r\n overflow-x: hidden;\r\n`;\r\n\r\nconst EditTextBubble = styled.div`\r\n align-items: center;\r\n justify-content: center;\r\n display: flex;\r\n overflow: hidden;\r\n width: 0;\r\n transition: 110ms;\r\n`;\r\n\r\nconst InnerMessage = styled.li`\r\n width: 100%;\r\n display: flex;\r\n list-style: none;\r\n flex-direction: ${({checkOwner}) => (checkOwner ? \"row\" : \"row-reverse\")};\r\n justify-content: flex-end;\r\n align-items: center;\r\n padding: 8px 15px 8px 15px;\r\n border-radius: 5px;\r\n box-sizing: border-box;\r\n &:hover {\r\n  cursor: pointer;\r\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\r\n }\r\n &:hover ${EditTextBubble} {\r\n  margin: ${({checkOwner}) => (checkOwner ? \"0 1.5px\" : \"0 8px 0 1.5px\")};\r\n  width: 20px;\r\n  cursor: pointer;\r\n }\r\n`;\r\n\r\nconst TextBubble = styled.div`\r\n background: #628395;\r\n color: white;\r\n padding: 6px 8px;\r\n border-radius: 5px;\r\n max-width: 35%;\r\n white-space: normal;\r\n overflow-wrap: break-word;\r\n`;\r\n\r\nconst TextInformationBubble = styled.span`\r\n display: flex;\r\n flex-direction: column;\r\n justify-content: center;\r\n font-size: 10px;\r\n padding: 0 7px;\r\n align-items: center;\r\n color: ${({memberColor}) => memberColor};\r\n`;\r\n\r\nconst LeaveGroup = styled.button`\r\n background: #ef4f4f;\r\n color: white;\r\n border: none;\r\n border-radius: 8px;\r\n font-size: 12px;\r\n &:hover {\r\n  cursor: pointer;\r\n }\r\n position: absolute;\r\n top: 20px;\r\n left: 20px;\r\n padding: 10px;\r\n`;\r\nconst UpdateText = styled.input`\r\n outline: none;\r\n border-radius: 7px;\r\n border: none;\r\n padding: 5px;\r\n color: white;\r\n background: #007580;\r\n`;\r\n// -------------------------------------------------------------------------------\r\n\r\nconst ReplyWrapper = styled.div`\r\n overflow: hidden;\r\n transition: 110ms;\r\n width: 100%;\r\n border-radius: 7px;\r\n position: relative;\r\n display: flex;\r\n background: #242c37;\r\n justify-content: space-between;\r\n align-items: center;\r\n margin-bottom: 5px;\r\n height: ${({isReplied}) => (isReplied ? \"75px\" : \"0px\")};\r\n`;\r\nconst ReplyText = styled.div`\r\n height: 100%;\r\n width: 100%;\r\n color: white;\r\n box-sizing: border-box;\r\n display: flex;\r\n align-items: center;\r\n padding: 20px 10px;\r\n font-size: 14px;\r\n overflow-wrap: break-word;\r\n white-space: normal;\r\n`;\r\nconst RepliedMessageInfo = styled.div`\r\n display: flex;\r\n width: 100%;\r\n justify-content: space-between;\r\n margin-bottom: 5px;\r\n color: ${({color}) => color};\r\n font-size: 11px;\r\n`;\r\n\r\nconst RepliedMessageInfo2 = styled.div`\r\n position: absolute;\r\n color: ${({color}) => color};\r\n top: 8px;\r\n left: 8px;\r\n font-size: 11px;\r\n`;\r\n\r\nconst ReplyCloseIcon = styled.div`\r\n font-size: 20px;\r\n &:hover {\r\n  cursor: pointer;\r\n }\r\n color: grey;\r\n margin-right: 20px;\r\n`;\r\nconst RepliedMessageTextBubble = styled.div`\r\n background: #323d4d;\r\n color: white;\r\n border-radius: 5px;\r\n max-width: 35%;\r\n min-width: 93px;\r\n white-space: normal;\r\n display: flex;\r\n position: relative;\r\n display: flex;\r\n padding: 10px;\r\n flex-direction: column;\r\n overflow-wrap: break-word;\r\n margin-right: 4px;\r\n margin-left: 4px;\r\n font-size: 14px;\r\n`;\r\nconst memberColors = [\r\n \"#F8485E \",\r\n \"#00C1D4\",\r\n \"DarkCyan\",\r\n \"DarkGoldenRod\",\r\n \"DarkBlue\",\r\n \"DarkRed\",\r\n \"DarkOrange\",\r\n \"Indigo\",\r\n \"Purple\",\r\n \"YellowGreen\",\r\n];\r\n\r\nconst usePrevious = value => {\r\n const ref = useRef();\r\n useEffect(() => {\r\n  ref.current = value;\r\n });\r\n return ref.current;\r\n};\r\n\r\nconst Room = ({match, history}) => {\r\n const {data, loading, subscribeToMore, refetch} = useQuery(\r\n  GET_CHAT_ROOM_QUERY,\r\n  {\r\n   variables: {\r\n    roomID: match.params.id,\r\n   },\r\n   onError: err => {\r\n    history.push(\"/main-page\");\r\n   },\r\n  }\r\n );\r\n const [isBeingUpdatedID, setIsBeingUpdatedID] = useState(false);\r\n const [isReplied, setIsReplied] = useState();\r\n const [send, {loading: Loading}] = useMutation(SEND_MESSAGE_MUTATION);\r\n const [deleteMessage] = useMutation(DELETE_MESSAGE_MUTATION);\r\n const [updateMessage] = useMutation(UPDATE_MESSAGE_MUTATION);\r\n const [leaveRoom] = useMutation(LEAVE_ROOM_MUTATION, {\r\n  onCompleted: data => {\r\n   history.push(\"/main-page\");\r\n  },\r\n  onError: err => {\r\n   console.log(err);\r\n  },\r\n });\r\n const currentUser = useSelector((state = {}) => state.user);\r\n const prevMessagesLength = usePrevious(data?.getChatRoom.messages.length);\r\n const currentMessagesLength = data?.getChatRoom.messages.length;\r\n const OnSendMessage = () => {\r\n  if (chatText.value) {\r\n   setIsReplied(null);\r\n   send({\r\n    variables: {\r\n     text: chatText.value || null,\r\n     roomID: match.params.id || null,\r\n     repliedMessage: isReplied?._id,\r\n    },\r\n   });\r\n  }\r\n };\r\n const scrollToBottom = () => {\r\n  var chatBox = document.querySelector(\".chatMessages\");\r\n  chatBox.scrollTop = chatBox.scrollHeight;\r\n };\r\n\r\n const onLeaveRoom = () => {\r\n  leaveRoom({\r\n   variables: {\r\n    roomID: match.params.id,\r\n   },\r\n  });\r\n };\r\n const OnDeleteMessage = ID => {\r\n  deleteMessage({\r\n   variables: {\r\n    messageID: ID || null,\r\n    roomID: match.params.id || null,\r\n   },\r\n  });\r\n };\r\n const onUpdateMessage = (ID, value) => {\r\n  updateMessage({\r\n   variables: {\r\n    messageID: ID || null,\r\n    roomID: match.params.id || null,\r\n    updatedText: value || null,\r\n   },\r\n  });\r\n };\r\n\r\n useEffect(() => {\r\n  if (data) {\r\n   console.log(\"asd\");\r\n   refetch();\r\n  }\r\n }, [match.url]);\r\n useEffect(() => {\r\n  if (!loading) {\r\n   scrollToBottom();\r\n  }\r\n }, [loading]);\r\n useEffect(() => {\r\n  if (!loading) {\r\n   if (currentMessagesLength > prevMessagesLength) {\r\n    scrollToBottom();\r\n   }\r\n  }\r\n }, [currentMessagesLength]);\r\n useEffect(() => {\r\n  subscribeToMore({\r\n   variables: {\r\n    roomID: match.params.id,\r\n   },\r\n   document: MESSAGE,\r\n   updateQuery: (prev, {subscriptionData}) => {\r\n    const subMessage = subscriptionData.data.message;\r\n    const type = subscriptionData.data.message.actionType;\r\n    switch (type) {\r\n     case \"SEND\":\r\n      var updatedData = Object.assign({}, prev.getChatRoom, {\r\n       messages: prev.getChatRoom.messages.concat(subMessage),\r\n      }); // message type must be the same shape as prevmessagetype\r\n      break;\r\n     case \"DELETE\":\r\n      var initialData = prev.getChatRoom.messages.filter(\r\n       msg => msg._id != subMessage._id\r\n      );\r\n      var lastData = initialData.map(msg => {\r\n       if (msg.repliedMessage?._id == subMessage._id) {\r\n        return Object.assign({}, msg, {repliedMessage: null});\r\n       } else {\r\n        return msg;\r\n       }\r\n      });\r\n      var updatedData = Object.assign({}, prev.getChatRoom, {\r\n       messages: lastData,\r\n      });\r\n      console.log(updatedData);\r\n      break;\r\n     case \"UPDATE\":\r\n      setIsBeingUpdatedID(null);\r\n      var updatedData = Object.assign({}, prev.getChatRoom, {\r\n       messages: prev.getChatRoom.messages.map(msg => {\r\n        return msg._id == subMessage._id\r\n         ? Object.assign({}, msg, {\r\n            text: subMessage.text,\r\n            isEdited: subMessage.isEdited,\r\n           })\r\n         : msg;\r\n       }),\r\n      });\r\n      break;\r\n     default:\r\n      var updatedData = prev.getChatRoom;\r\n      break;\r\n    }\r\n\r\n    return {getChatRoom: updatedData};\r\n   },\r\n  });\r\n\r\n  subscribeToMore({\r\n   variables: {\r\n    roomID: match.params.id,\r\n   },\r\n   document: MEMBER_JOINED_ROOM,\r\n   updateQuery: (prev, {subscriptionData}) => {\r\n    const joinedMember = subscriptionData.data.room;\r\n    switch (joinedMember.actionType) {\r\n     case \"JOIN\":\r\n      var mergedData = Object.assign({}, prev.getChatRoom, {\r\n       members: prev.getChatRoom.members.concat(joinedMember.user),\r\n      });\r\n      break;\r\n     case \"LEAVE\":\r\n      var mergedData = Object.assign({}, prev.getChatRoom, {\r\n       members: prev.getChatRoom.members.filter(\r\n        m => m._id != joinedMember.user._id\r\n       ),\r\n      });\r\n      break;\r\n     default:\r\n      var mergedData = prev.getChatRoom;\r\n      break;\r\n    }\r\n    return {getChatRoom: mergedData};\r\n   },\r\n  });\r\n\r\n  return () => {\r\n   onLeaveRoom();\r\n  };\r\n }, []);\r\n\r\n console.log(data);\r\n var chatText;\r\n return (\r\n  <GeneralWrapper>\r\n   <LeaveGroup onClick={onLeaveRoom}>\r\n    LEAVE THE ROOM{\" \"}\r\n    <i\r\n     style={{\r\n      fontSize: 14,\r\n      marginLeft: 4,\r\n     }}\r\n     className='fas fa-sign-out-alt'\r\n    ></i>\r\n   </LeaveGroup>\r\n\r\n   <Members>\r\n    <span\r\n     style={{\r\n      color: \"#ef4f4f\",\r\n      fontSize: 13,\r\n      fontWeight: \"600\",\r\n      letterSpacing: 1,\r\n     }}\r\n    >\r\n     GROUP MEMBERS\r\n     <span\r\n      style={{\r\n       marginLeft: 5,\r\n       fontWeight: 600,\r\n      }}\r\n     >\r\n      {data && (\r\n       <React.Fragment>\r\n        {\" \"}\r\n        {/* we need to use react fragment here to convert ( to string */}({\" \"}\r\n        {data.getChatRoom.members.length + \"/\" + data.getChatRoom.limit}\r\n        <i\r\n         style={{\r\n          fontSize: 10,\r\n          marginLeft: 2,\r\n         }}\r\n         className='fas fa-user'\r\n        />\r\n        )\r\n       </React.Fragment>\r\n      )}{\" \"}\r\n     </span>\r\n    </span>\r\n\r\n    <ul\r\n     style={{\r\n      padding: 0,\r\n      listStyle: \"none\",\r\n      width: \"100%\",\r\n      marginTop: 30,\r\n     }}\r\n    >\r\n     {data &&\r\n      data.getChatRoom.members.map((member, index) => {\r\n       return (\r\n        <li\r\n         style={{\r\n          padding: 5,\r\n          width: \"50%\",\r\n          display: \"flex\",\r\n          fontSize: 17.5,\r\n          alignItems: \"center\",\r\n         }}\r\n         key={member._id}\r\n        >\r\n         <i\r\n          className='fas fa-user'\r\n          style={{\r\n           color: memberColors[index],\r\n           fontSize: 15,\r\n          }}\r\n         />\r\n         <span\r\n          style={{\r\n           marginLeft: 10,\r\n           fontSize: 14,\r\n          }}\r\n         >\r\n          {\" \"}\r\n          {member.username}{\" \"}\r\n         </span>\r\n         {data.getChatRoom.host._id == member._id && (\r\n          <i\r\n           className='fas fa-crown'\r\n           style={{\r\n            color: \"#f0a500\",\r\n            fontSize: 11,\r\n            marginLeft: 4,\r\n           }}\r\n          />\r\n         )}{\" \"}\r\n        </li>\r\n       );\r\n      })}{\" \"}\r\n    </ul>\r\n   </Members>\r\n\r\n   <ChatBox>\r\n    {\" \"}\r\n    {loading ? (\r\n     \" Messages are loading....\"\r\n    ) : (\r\n     <Messages className='chatMessages'>\r\n      {data &&\r\n       data.getChatRoom.messages.map((msg, index) => {\r\n        return (\r\n         <InnerMessage\r\n          key={index}\r\n          checkOwner={msg.owner._id == currentUser._id}\r\n         >\r\n          {\" \"}\r\n          {/* row-reverse also reverses the end and start property */}\r\n          {msg.isEdited && (\r\n           <span\r\n            style={{\r\n             fontSize: 12,\r\n             color: \"grey\",\r\n            }}\r\n           >\r\n            {\" \"}\r\n            (edited){\" \"}\r\n           </span>\r\n          )}\r\n          <TextInformationBubble\r\n           memberColor={\r\n            memberColors[\r\n             data.getChatRoom.members.findIndex(m => m._id == msg.owner._id)\r\n            ] || \"#87A8A4\"\r\n           }\r\n          >\r\n           <span style={{fontSize: 12}}>\r\n            {\" \"}\r\n            <i className='fas fa-user' /> {msg.owner.username}{\" \"}\r\n           </span>\r\n           <span style={{color: \"#628395\"}}> {msg.date.split(\"-\")[0]} </span>\r\n          </TextInformationBubble>\r\n          {msg.repliedMessage && (\r\n           <RepliedMessageTextBubble>\r\n            <RepliedMessageInfo\r\n             color={\r\n              memberColors[\r\n               data?.getChatRoom.members.findIndex(\r\n                m => m._id == msg.repliedMessage.owner._id\r\n               )\r\n              ] || \"#87A8A4\"\r\n             }\r\n             style={{\r\n              top: 4,\r\n              left: 4,\r\n             }}\r\n            >\r\n             <span style={{marginRight: 3}}>\r\n              <i className='fas fa-user' style={{marginRight: 3}} />{\" \"}\r\n              {msg.repliedMessage.owner.username}{\" \"}\r\n             </span>\r\n\r\n             <span\r\n              style={{\r\n               marginLeft: 3,\r\n               color: \"#628395\",\r\n              }}\r\n             >\r\n              {msg.repliedMessage.date.split(\"-\")[0]}{\" \"}\r\n             </span>\r\n            </RepliedMessageInfo>\r\n            <span>{msg.repliedMessage.text}</span>\r\n           </RepliedMessageTextBubble>\r\n          )}\r\n          <TextBubble>\r\n           {\" \"}\r\n           {isBeingUpdatedID == msg._id ? (\r\n            <React.Fragment>\r\n             <UpdateText\r\n              onKeyDown={e => {\r\n               if (e.key == \"Enter\") {\r\n                onUpdateMessage(msg._id, e.target.value);\r\n               }\r\n               if (e.key == \"Escape\") {\r\n                setIsBeingUpdatedID(false);\r\n               }\r\n              }}\r\n              defaultValue={msg.text}\r\n             />\r\n             <span style={{fontSize: 10}}>\r\n              {\" \"}\r\n              kmak iin esc  kaydetmek iin enter{\" \"}\r\n             </span>\r\n            </React.Fragment>\r\n           ) : (\r\n            msg.text\r\n           )}{\" \"}\r\n          </TextBubble>\r\n          {msg.owner._id == currentUser._id ? (\r\n           <React.Fragment>\r\n            <EditTextBubble onClick={() => OnDeleteMessage(msg._id)}>\r\n             <i style={{color: \"#ec4646\"}} className='fas fa-trash-alt'></i>\r\n            </EditTextBubble>\r\n            <EditTextBubble onClick={() => setIsBeingUpdatedID(msg._id)}>\r\n             <i style={{color: \"#ec4646\"}} className='fas fa-edit'></i>\r\n            </EditTextBubble>\r\n            <EditTextBubble onClick={() => setIsReplied(msg)}>\r\n             <i style={{color: \"#ec4646\"}} className='fas fa-reply'></i>\r\n            </EditTextBubble>\r\n           </React.Fragment>\r\n          ) : (\r\n           <EditTextBubble onClick={() => setIsReplied(msg)}>\r\n            <i style={{color: \"#ec4646\"}} className='fas fa-reply'></i>\r\n           </EditTextBubble>\r\n          )}{\" \"}\r\n         </InnerMessage>\r\n        );\r\n       })}{\" \"}\r\n     </Messages>\r\n    )}\r\n    <ReplyWrapper isReplied={isReplied}>\r\n     <RepliedMessageInfo2\r\n      color={\r\n       memberColors[\r\n        data?.getChatRoom.members.findIndex(m => m._id == isReplied?.owner._id)\r\n       ] || \"#87A8A4\"\r\n      }\r\n     >\r\n      <i className='fas fa-user' />\r\n      <span style={{marginLeft: 4}}>{isReplied?.owner.username}</span>\r\n      <span\r\n       style={{\r\n        marginLeft: 8,\r\n        color: \"#628395\",\r\n       }}\r\n      >\r\n       {isReplied?.date.split(\"-\")[0]}{\" \"}\r\n      </span>\r\n     </RepliedMessageInfo2>\r\n     <ReplyText>{isReplied?.text}</ReplyText>\r\n     <ReplyCloseIcon onClick={() => setIsReplied(null)}>\r\n      <i className='fas fa-times'></i>\r\n     </ReplyCloseIcon>\r\n    </ReplyWrapper>\r\n    <TextPart>\r\n     <ChatTextInput\r\n      ref={ref => (chatText = ref)}\r\n      onKeyDown={e => {\r\n       if (e.key == \"Enter\") {\r\n        // we can use onKeyDown event to handle keyboard actions !\r\n        OnSendMessage();\r\n        e.target.value = \"\";\r\n       }\r\n      }}\r\n      maxLength='100'\r\n     />\r\n     <Send onClick={OnSendMessage}>\r\n      {\" \"}\r\n      {Loading ? <img src='/spin.gif' width='30' /> : \"SEND\"}{\" \"}\r\n     </Send>\r\n    </TextPart>\r\n   </ChatBox>\r\n  </GeneralWrapper>\r\n );\r\n};\r\n\r\nexport default Room;\r\n","import React, {useEffect, useState, useRef} from \"react\";\r\nimport {useLazyQuery} from \"@apollo/client\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {CHECK_TOKEN_QUERY} from \"../GraphqQL/Queries/AccountQuery\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {Route} from \"react-router-dom\";\r\n\r\nconst usePrevious = value => {\r\n const ref = useRef();\r\n useEffect(() => {\r\n  ref.current = value;\r\n });\r\n return ref.current;\r\n};\r\n\r\nconst PrivateRoute = ({component: Component, ...rest}) => {\r\n let history = useHistory();\r\n let dispatch = useDispatch();\r\n let [loadingC, setLoadingC] = useState(true);\r\n let prevPath = usePrevious(rest.path);\r\n let currentPath = rest.path;\r\n let [check, {data}] = useLazyQuery(CHECK_TOKEN_QUERY, {\r\n  context: {\r\n   history,\r\n  },\r\n  notifyOnNetworkStatusChange: true,\r\n  fetchPolicy: \"network-only\",\r\n\r\n  onCompleted: ({checkToken}) => {\r\n   setLoadingC(false);\r\n   dispatch({\r\n    type: \"SET_USER\",\r\n    payload: checkToken,\r\n   });\r\n  },\r\n });\r\n\r\n useEffect(() => {\r\n  check(); // we always get the new fresh user data\r\n }, [currentPath]); // fetching users when user routes via browser routing\r\n\r\n return (\r\n  <Route\r\n   {...rest}\r\n   component={props =>\r\n    !loadingC && data && prevPath == currentPath ? (\r\n     <Component {...props} />\r\n    ) : null\r\n   }\r\n  />\r\n );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import \"./App.css\";\r\nimport React from \"react\";\r\nimport {Provider} from \"react-redux\";\r\nimport {createStore} from \"redux\";\r\nimport {Route, Redirect, BrowserRouter, Switch} from \"react-router-dom\";\r\nimport {\r\n ApolloProvider,\r\n ApolloClient,\r\n InMemoryCache,\r\n ApolloLink,\r\n HttpLink,\r\n from,\r\n split,\r\n} from \"@apollo/client\";\r\n\r\nimport {onError} from \"apollo-link-error\";\r\nimport Login from \"./Chat-App/Containers/login\";\r\nimport Register from \"./Chat-App/Containers/register\";\r\nimport UserReducer from \"./Chat-App/Reducers/userReducer\";\r\nimport MainPage from \"./Chat-App/Containers/home/main-page\";\r\nimport Room from \"./Chat-App/Containers/home/room\";\r\nimport PrivateRoute from \"./Chat-App/Containers/privateRoute\";\r\nimport {logout} from \"./Chat-App/Actions/action\";\r\nimport {WebSocketLink} from \"@apollo/client/link/ws\";\r\nimport {getMainDefinition} from \"@apollo/client/utilities\";\r\n\r\nconst httpTerminatingLink = new HttpLink({\r\n //uri: \"http://localhost:8000/graphql\",\r\n uri: \"https://groupchattappp.herokuapp.com/graphql\",\r\n});\r\n//\r\nconst wsLink = new WebSocketLink({\r\n //uri: \"ws://localhost:8000/subscriptions\",\r\n uri: \"wss://groupchattappp.herokuapp.com/subscriptions\",\r\n options: {\r\n  reconnect: true,\r\n  connectionParams: {\r\n   token: localStorage.getItem(\"token\"),\r\n   roomID:\r\n    window.location.pathname.split(\"/\")[\r\n     window.location.pathname.split(\"/\").length - 1\r\n    ],\r\n  },\r\n  timeout: 60000,\r\n },\r\n});\r\n\r\nconst initalState = {\r\n user: {},\r\n error: {},\r\n};\r\n\r\nconst store = createStore(UserReducer, initalState);\r\n\r\nconst splitLink = split(\r\n ({query}) => {\r\n  const definition = getMainDefinition(query);\r\n  return (\r\n   definition.kind === \"OperationDefinition\" &&\r\n   definition.operation === \"subscription\"\r\n  );\r\n },\r\n wsLink,\r\n httpTerminatingLink\r\n);\r\n\r\nconst errorLink = onError(({graphQLErrors, networkError, operation}) => {\r\n // only runs when server respones\r\n\r\n let errorType, message;\r\n if (graphQLErrors) {\r\n  for (const el of graphQLErrors) {\r\n   switch (el.extensions.code) {\r\n    case \"UNAUTHENTICATED\":\r\n     store.dispatch(logout());\r\n     window.location.href = \"/login\";\r\n     break;\r\n    default:\r\n     break;\r\n   }\r\n   errorType = `[${el.extensions.code}]`;\r\n   message = message || el.message;\r\n  }\r\n\r\n  store.dispatch({\r\n   type: \"SET_ERROR\",\r\n   payload: {\r\n    errorType,\r\n    message,\r\n   },\r\n  });\r\n }\r\n\r\n if (networkError) {\r\n  console.log(graphQLErrors);\r\n }\r\n});\r\n\r\nconst middleWareLink = new ApolloLink((operation, forward) => {\r\n const token = localStorage.getItem(\"token\");\r\n\r\n operation.setContext({\r\n  headers: {\r\n   ...operation.getContext().headers,\r\n   authorization: token ? `Bearer ${token}` : \"\",\r\n  },\r\n });\r\n\r\n return forward(operation);\r\n});\r\n//\r\nexport const client = new ApolloClient({\r\n link: from([middleWareLink, errorLink, splitLink]),\r\n cache: new InMemoryCache(),\r\n});\r\n\r\nfunction App() {\r\n return (\r\n  <ApolloProvider client={client}>\r\n   <BrowserRouter>\r\n    <Provider store={store}>\r\n     <Switch>\r\n      <Route path='/' component={() => <Redirect to='/login' />} exact />\r\n      <Route path='/login' component={Login} />{\" \"}\r\n      <Route path='/register' component={Register} />{\" \"}\r\n      <PrivateRoute path='/main-page' component={MainPage} exact />\r\n      <PrivateRoute path='/room/:id' component={Room} exact />\r\n     </Switch>{\" \"}\r\n    </Provider>{\" \"}\r\n   </BrowserRouter>{\" \"}\r\n  </ApolloProvider>\r\n );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}